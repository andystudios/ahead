
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e900bf6c-ce26-5b1c-80ea-9536f17fa901")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,898496,e=>{"use strict";e.s(["HealthReportDisplay",()=>t6,"HealthReportDisplayForReport",()=>t4],898496);var t=e.i(843476),l=e.i(15243),a=e.i(647163),s=e.i(587064),i=e.i(271645),n=e.i(178761);let r=i.createContext({open:!1,setOpen:()=>{}}),o=e=>{let{children:l,open:s,onOpenChange:o,...d}=e,[c,u]=i.useState(!1),x=void 0!==s,m=x?s:c,p=x?e=>{let t="function"==typeof e?e(m):e;null==o||o(t)}:u;return(0,t.jsxs)(r.Provider,{value:{open:m,setOpen:p},children:[m&&(0,t.jsx)("div",{className:(0,a.cn)("popover-blur fixed inset-0 z-40",a.blurOverlayClasses)}),(0,t.jsx)(n.Root,{open:m,onOpenChange:e=>{p(e),null==o||o(e)},...d,children:l})]})},d=n.Trigger;n.Close,n.Anchor;let c=i.forwardRef((e,l)=>{let{className:s,align:i="center",sideOffset:r=4,...o}=e;return(0,t.jsx)(n.Portal,{children:(0,t.jsx)(n.Content,{ref:l,align:i,sideOffset:r,className:(0,a.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",s),...o})})});c.displayName="PopoverWithBlurContent",i.forwardRef((e,l)=>{let{className:s,...i}=e;return(0,t.jsx)(n.Arrow,{ref:l,className:(0,a.cn)("fill-popover",s),...i})}).displayName="PopoverWithBlurArrow";var u=e.i(924499),x=e.i(25887),m=e.i(676029),p=e.i(831195),h=e.i(643531),g=e.i(664659),f=e.i(655900),v=e.i(107233),j=e.i(662031),b=e.i(618566);function w(e){if(!e)return"";let t=e.operated_by?"".concat(e.operated_by," (").concat(e.name,"), ").concat(e.address):"".concat(e.name,", ").concat(e.address);return"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(t))}var N=e.i(463059);let y=e=>{let{clinic:l,onClick:a}=e,s=l.photo_url?"https://booking.aheadhealth.com/".concat(l.photo_url):null,i=w(l);return(0,t.jsxs)("button",{className:"flex w-full cursor-pointer items-center gap-3 pr-1 text-left",onClick:()=>{null==a||a(),i&&window.open(i,"_blank","noopener,noreferrer")},children:[(0,t.jsx)("div",{className:"size-10 shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-[rgba(147,182,238,0.2)] to-[rgba(81,130,208,0.2)]",children:s&&(0,t.jsx)("img",{src:s,alt:l.name,className:"size-full object-cover"})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col justify-center gap-1",children:[(0,t.jsx)("div",{className:"text-[15px] leading-none text-[#202020]",children:l.name}),l.address&&(0,t.jsx)("div",{className:"text-xs leading-[1.2] text-[#2d2d2d]",children:l.address})]}),(0,t.jsx)(N.ChevronRight,{className:"size-4 shrink-0 text-[#2d2d2d]"})]})},C=e=>{var l;let{doctor:a}=e,{t:s}=(0,m.useT)(),i=a.isAnonymous?s("Clinical Review"):"".concat(a.title," ").concat(a.firstName," ").concat(a.lastName),n=!a.isAnonymous&&(null==(l=a.profilePicture)?void 0:l.url)?a.profilePicture.url:null;return(0,t.jsxs)("div",{className:"flex items-center gap-3 pr-1",children:[(0,t.jsx)("div",{className:"size-10 shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-[rgba(147,182,238,0.2)] to-[rgba(81,130,208,0.2)]",children:n&&(0,t.jsx)("img",{src:n,alt:i,className:"size-full object-cover"})}),(0,t.jsx)("div",{className:"flex min-w-0 flex-1 flex-col justify-center pb-0.5",children:(0,t.jsx)("div",{className:"text-[15px] leading-none text-[#202020]",children:i})})]})},k=e=>{var l;let{product:a}=e,s=(null==(l=a.images)?void 0:l[0])?"https://booking.aheadhealth.com/".concat(a.images[0]):null;return(0,t.jsxs)("div",{className:"flex items-center gap-3 pr-1",children:[(0,t.jsx)("div",{className:"size-10 shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-[rgba(147,182,238,0.2)] to-[rgba(81,130,208,0.2)]",children:s&&(0,t.jsx)("img",{src:s,alt:a.name,className:"size-full object-cover"})}),(0,t.jsx)("div",{className:"flex min-w-0 flex-1 flex-col justify-center pb-0.5",children:(0,t.jsx)("div",{className:"text-[15px] leading-none text-[#202020]",children:a.name})})]})};var R=e.i(630374),D=e.i(649876),S=e.i(945919),P=e.i(676250);let T=e=>{var l,a;let{isOpen:s,onClose:n}=e,{report:r,booking:o,products:d,clinics:c,doctor:x}=(0,u.useHealthReport)(),{t:p}=(0,m.useT)(),[h,g]=(0,i.useState)(!1),f=(0,i.useMemo)(()=>(null==o?void 0:o.packageProductKey)?d.find(e=>e.uid===o.packageProductKey):null,[o,d]),v=(0,i.useMemo)(()=>(null==o?void 0:o.addOnProductKeys)?o.addOnProductKeys.map(e=>d.find(t=>t.uid===e)).filter(e=>void 0!==e):[],[o,d]),b=(0,i.useMemo)(()=>(null==o?void 0:o.clinicKey)?c.find(e=>e.uid===o.clinicKey):null,[o,c]),w=(null==(l=r.dataCollectionDate)?void 0:l.toDate())||(null==(a=r.createdAt)?void 0:a.toDate()),N=w?(0,S.format)(w,"MMMM do, yyyy"):null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.Dialog,{open:s,onOpenChange:e=>!e&&n(),children:(0,t.jsxs)(R.DialogContent,{className:"shadow-elevated-soft max-w-[400px] gap-4 rounded-[20px] bg-white p-4",children:[(0,t.jsx)(R.DialogTitle,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("div",{className:"text-lg leading-none text-[#2d2d2d]",children:p("Report details")}),N&&(0,t.jsx)("div",{className:"text-xs leading-[1.2] text-[#2d2d2d]",children:N})]})}),(0,t.jsxs)("div",{className:"bg-background flex flex-col gap-2 overflow-hidden rounded-xl",children:[f&&(0,t.jsxs)("section",{className:"flex flex-col gap-4 bg-[#f4f4f4] px-4 pt-3 pb-4","aria-label":p("Blood panel"),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-sm leading-[1.2] text-[#2d2d2d]",id:"blood-panel-label",children:p("Blood panel")}),(0,t.jsx)(k,{product:f})]}),v.length>0&&(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-sm leading-[1.2] text-[#2d2d2d]",id:"add-ons-label",children:p("Add-ons")}),(0,t.jsx)("ul",{"aria-labelledby":"add-ons-label",className:"flex flex-col gap-3",children:v.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(k,{product:e})},e.uid))})]})]}),b&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-px w-full bg-[#e5e7eb]",role:"separator","aria-hidden":"true"}),(0,t.jsx)("section",{className:"flex flex-col gap-6 bg-[#f4f4f4] px-4 pt-3 pb-4","aria-label":p("Clinic"),children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-sm leading-[1.2] text-[#2d2d2d]",children:p("Clinic")}),(0,t.jsx)(y,{clinic:b,onClick:()=>{(0,D.logEvent)("report_details.clinic_directions_clicked",void 0,{userKey:r.uid})}})]})})]}),x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-px w-full bg-[#e5e7eb]",role:"separator","aria-hidden":"true"}),(0,t.jsx)("section",{className:"flex flex-col gap-6 bg-[#f4f4f4] px-4 pt-3 pb-4","aria-label":p("Reviewed by"),children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-sm leading-[1.2] text-[#2d2d2d]",children:p("Reviewed by")}),(0,t.jsx)(C,{doctor:x})]})})]})]}),(0,t.jsxs)("button",{className:"flex cursor-pointer items-center justify-center gap-1.5",onClick:()=>{(0,D.logEvent)("report_details.share_clicked",void 0,{userKey:r.uid}),g(!0)},"aria-label":p("Share report"),children:[(0,t.jsx)(j.Share2,{className:"size-4","aria-hidden":"true"}),(0,t.jsx)("span",{className:"text-sm leading-[1.1] text-black opacity-80",children:p("Share report")})]})]})}),(0,t.jsx)(P.ShareExportDialog,{isOpen:h,onClose:()=>g(!1)})]})};var B=e.i(717038),M=e.i(995446),H=e.i(245281);let A=e=>{var l,a,s,n;let{reportId:r}=e,{t:o}=(0,m.useT)(),{userReports:d,products:c}=(0,u.useHealthReport)(),x=d.find(e=>e.uid===r),p=(0,i.useMemo)(()=>(null==x?void 0:x.fromBookingKey)?(0,B.docObs)("booking",x.fromBookingKey):(0,H.of)(null),[null==x?void 0:x.fromBookingKey]),h=(0,M.useObs)(p,[null==x?void 0:x.fromBookingKey]),g=c.find(e=>e.uid===(null==h?void 0:h.packageProductKey)),f=(null==h||null==(l=h.addOnProductKeys)?void 0:l.map(e=>c.find(t=>t.uid===e)).filter(Boolean))||[],v=(null==x||null==(a=x.dataCollectionDate)?void 0:a.toDate())||(null==x||null==(s=x.createdAt)?void 0:s.toDate()),j=v?(0,S.format)(v,"MMMM do, yyyy"):null,b=(null==g||null==(n=g.images)?void 0:n[0])?"https://booking.aheadhealth.com/".concat(g.images[0]):"/images/report/default-report-image.png";return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center",children:(0,t.jsx)("img",{src:b,alt:"",className:"size-full rounded-lg object-cover"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-[15px] leading-none",children:(()=>{let e=(null==g?void 0:g.name)||o("Health report"),t=f.length,l=t>0?" + ".concat(t," ").concat(o("add-on",{count:t})):"";return"".concat(e).concat(l)})()}),j&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs leading-none",children:j})]})]})},I=()=>{let{userReports:e}=(0,u.useHealthReport)();return(0,i.useMemo)(()=>(0,p.default)(e,e=>{var t,l;return(null==(t=e.dataCollectionDate)?void 0:t.toMillis())||(null==(l=e.createdAt)?void 0:l.toMillis())||0}).reverse(),[e])},_=()=>{let{report:e}=(0,u.useHealthReport)(),{t:l}=(0,m.useT)(),{log:s}=(0,x.useA)("report"),[n,r]=(0,i.useState)(!1),[p,w]=(0,i.useState)(!1),[N,y]=(0,i.useState)(!1),C=I(),k=(0,b.useRouter)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("section",{className:"shadow-soft flex w-full min-w-0 flex-col rounded-[20px] bg-white px-2 pt-2","aria-label":"Report selector",children:(0,t.jsxs)(o,{open:N,onOpenChange:y,children:[(0,t.jsx)(d,{asChild:!0,children:(0,t.jsxs)("button",{className:(0,a.cn)("relative flex cursor-pointer flex-col gap-3 rounded-2xl p-3 text-left",N?"z-50 bg-white":"bg-selected"),"aria-expanded":N,"aria-haspopup":"listbox","aria-label":l("Selected report")+" - click to change",children:[(0,t.jsx)("div",{className:"text-sm",children:l("Selected report")}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(A,{reportId:e.uid}),N?(0,t.jsx)(f.ChevronUp,{className:"h-4 w-4 shrink-0","aria-hidden":"true"}):(0,t.jsx)(g.ChevronDown,{className:"h-4 w-4 shrink-0","aria-hidden":"true"})]})]})}),(0,t.jsx)(c,{align:"start",sideOffset:8,className:"shadow-soft w-[var(--radix-popover-trigger-width)] rounded-2xl border-0 bg-white p-2","aria-label":"Available reports",children:(0,t.jsx)("ul",{className:"flex flex-col",role:"listbox","aria-label":"Select a report",children:C.map(l=>(0,t.jsx)("li",{role:"option","aria-selected":l.uid===e.uid,children:(0,t.jsxs)("button",{onClick:()=>(e=>{s("report_selected",{reportKey:e}),y(!1),k.push("/report/".concat(e))})(l.uid),className:(0,a.cn)("flex w-full cursor-pointer items-center justify-between rounded-2xl px-2 py-3 text-left",l.uid===e.uid&&"bg-selected"),children:[(0,t.jsx)(A,{reportId:l.uid}),l.uid===e.uid&&(0,t.jsx)(h.Check,{className:"h-4 w-4 shrink-0","aria-hidden":"true"})]})},l.uid))})}),(0,t.jsxs)("div",{className:"flex items-center",role:"group","aria-label":"Report actions",children:[(0,t.jsxs)("button",{className:"flex h-12 grow cursor-pointer items-center justify-center gap-1.5 text-sm",onClick:()=>r(!0),"aria-label":l("View details"),children:[(0,t.jsx)(v.Plus,{className:"h-4 w-4","aria-hidden":"true"}),(0,t.jsx)("span",{children:l("View details")})]}),(0,t.jsx)("div",{className:"bg-selected h-3 w-px",role:"separator","aria-hidden":"true"}),(0,t.jsxs)("button",{className:"flex h-12 grow cursor-pointer items-center justify-center gap-1.5 text-sm",onClick:()=>w(!0),"aria-label":l("Share report"),children:[(0,t.jsx)(j.Share2,{className:"h-4 w-4","aria-hidden":"true"}),(0,t.jsx)("span",{children:l("Share report")})]})]})]})}),(0,t.jsx)(P.ShareExportDialog,{isOpen:p,onClose:()=>w(!1)}),(0,t.jsx)(T,{isOpen:n,onClose:()=>r(!1)})]})};var O=e.i(657688);let K=()=>{let{view:e,setView:s}=(0,l.useHealthReportParamView)(),{booking:i,actionSummary:n}=(0,u.useHealthReport)(),{t:r}=(0,m.useT)(),o=[{id:"home",label:r("Home"),available:!!i},{id:"report",label:r("Health report"),available:!0},{id:"actions",label:r("Action plan"),available:!!i||!!n}];return(0,t.jsxs)("nav",{className:(0,a.cn)("shadow-soft flex h-[38px] w-full items-center gap-1 rounded-full bg-white p-1",Y),"aria-label":"Report views",children:[(0,t.jsx)(O.default,{src:"/images/ahead-logo-grad.svg",alt:"Ahead",className:"h-7 w-7",width:28,height:28},"ahead-logo"),(0,t.jsx)("div",{className:"no-scrollbar flex grow items-center justify-evenly gap-1 overflow-x-auto",role:"tablist","aria-label":"View selection",children:o.map(l=>(0,t.jsx)("button",{role:"tab","aria-selected":e===l.id,"aria-disabled":!l.available,tabIndex:e===l.id?0:-1,onClick:()=>l.available&&s(l.id),className:(0,a.cn)("shrink-0 rounded-full px-3 pt-[6px] pb-[7px] text-xs whitespace-nowrap transition-colors md:text-sm",e===l.id?"bg-selected font-medium":l.available?"hover:text-foreground cursor-pointer":"text-foreground/50 cursor-default blur-[1px]"),children:l.label},l.id))})]})};var E=e.i(994179),z=e.i(4879);let F={CoordinateAppointment:"Welcome to Ahead, we're coordinating your appointment with our partner clinic",ResultsReady:"Your health report and action plan are ready - discover your results now!",CreationReport:"Our medical team is creating your personal report and action plan",CheckUpComplete:"Your check-up has been successfully completed! The data is now being processed.",BookingConfirmed:"Your appointment is confirmed! Let's prepare for your check-up"},U=e=>{let{className:l}=e;return(0,t.jsx)("svg",{className:l,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsxs)("g",{transform:"translate(2.5, 3)",children:[(0,t.jsx)("path",{d:"M0.5 12.5H18.5M14.0022 14.75V18.5M4.99784 14.75V18.5M3.50722 0.5H15.4928C17.1536 0.5 18.5 1.84703 18.5 3.50871V13.9913C18.5 15.6529 17.1536 17 15.4928 17H3.50722C1.84638 17 0.5 15.6529 0.5 13.9913V3.50871C0.5 1.84703 1.84638 0.5 3.50722 0.5Z",stroke:"currentColor",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M12.00423 6.174937L8.69877 9.55852L6.995768 7.81527C6.767903 7.58202 6.398763 7.58202 6.170898 7.81527C5.9430339 8.04852 5.9430339 8.42638 6.170898 8.65963L8.28634 10.82506C8.40027 10.94169 8.54952 11 8.69877 11C8.84802 11 8.99727 10.94169 9.11121 10.82506L12.8291 7.0193C13.05697 6.786051 13.05697 6.408187 12.8291 6.174937C12.60124 5.9416876 12.2321 5.9416876 12.00423 6.174937Z",fill:"currentColor"})]})})},L=e=>{let{className:l}=e;return(0,t.jsx)("svg",{className:l,viewBox:"0 0 7 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.52257 2.52429H6.39303V18.0174C6.39322 19.662 5.09519 21 3.49992 21C1.90446 21 0.606578 19.662 0.606578 18.0175L0.606672 2.5243H0.477467C0.213696 2.5243 0 2.30405 0 2.03213V0.492172C0 0.220252 0.213697 0 0.477467 0H6.52258C6.78635 0 7 0.22025 7 0.492172V2.03218C7 2.30405 6.78625 2.52429 6.52257 2.52429ZM5.43815 2.52429H1.56151V9.88089C3.11696 9.60393 3.79257 10.1522 4.08572 10.6983C4.30271 11.102 4.75709 11.2616 5.43819 11.1748L5.43815 2.52429ZM1.56151 10.8827V18.0174C1.56151 19.1192 2.43102 20.0155 3.49978 20.0155C4.56869 20.0155 5.43824 19.1192 5.43824 18.0174L5.43819 12.1651C4.31451 12.2753 3.61559 11.8553 3.2504 11.1753C2.99077 10.6918 2.18676 10.75 1.56151 10.8827ZM0.954745 1.53987H6.04509V0.984343H0.954745V1.53987Z",fill:"currentColor"})})},V=e=>{let{className:l}=e;return(0,t.jsx)("svg",{className:l,viewBox:"0 0 24 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M22.8031 2.275033C22.5736 2.148765 22.3247 2.0643028 22.0672 2.0253201C20.8329 1.83733 19.6845 2.716411 19.5021 3.98878C19.417 4.583 19.5578 5.18814 19.8953 5.67782L17.4898 7.92923C16.652 6.97394 15.2217 6.89954 14.295 7.76313C14.092 7.95229 13.9239 8.17788 13.7991 8.42887L11.0253 6.12095C11.0884 4.83543 10.1287 3.74056 8.88168 3.67548C7.63462 3.6104 6.57251 4.59972 6.50938 5.88525C6.50215 6.03255 6.5085 6.18028 6.52834 6.32636L3.91381 9.08422C3.06382 8.14241 1.63409 8.08921 0.720458 8.96546C-0.193175 9.84167 -0.244785 11.3155 0.605253 12.2573C1.45524 13.1991 2.88497 13.2523 3.7986 12.3761C4.41451 11.78537 4.66109 10.8909 4.43853 10.05458L6.95765 7.39748C7.70519 8.42796 9.12154 8.63869 10.1212 7.86809C10.3515 7.69059 10.5468 7.46937 10.6966 7.21641L13.553 9.59292C13.6004 10.70978 14.4103 11.63466 15.4832 11.7973C15.5936 11.81408 15.7051 11.82249 15.8167 11.82254C17.0666 11.81866 18.0767 10.77108 18.073 9.48268C18.0724 9.28345 18.047 9.08513 17.9976 8.8925L20.6743 6.38723C21.7759 6.99322 23.1455 6.56393 23.7333 5.42837C24.3212 4.29281 23.9047 2.881022 22.8031 2.275033ZM3.47298 10.85325C3.37493 11.5453 2.75117 12.0244 2.07983 11.9233C1.40848 11.82223 0.943687 11.17922 1.04179 10.48717C1.13985 9.79512 1.76361 9.31599 2.43495 9.41712C2.43557 9.41723 2.43619 9.41733 2.43681 9.41739C3.10706 9.5198 3.57057 10.16205 3.47298 10.85325ZM9.98237 6.18518C9.88349 6.87654 9.25973 7.35445 8.58907 7.25257C7.9184 7.15069 7.45479 6.50769 7.55361 5.81633C7.64221 5.19655 8.15733 4.73691 8.76508 4.73542C8.82557 4.73547 8.88602 4.74 8.94589 4.7491C9.61635 4.85135 10.0801 5.49377 9.98237 6.18518ZM17.0265 9.67535C16.9276 10.36671 16.3039 10.84462 15.6332 10.74275C14.9625 10.64087 14.4989 9.99787 14.5978 9.30651C14.6864 8.68673 15.2016 8.22703 15.8093 8.22559C15.8698 8.22559 15.9303 8.23017 15.9901 8.23928C16.6609 8.34089 17.1248 8.98378 17.0263 9.6753V9.67535H17.0265ZM22.9531 4.51494C22.8548 5.20678 22.2309 5.68549 21.5598 5.58414C20.8887 5.4828 20.4243 4.83974 20.5226 4.14791C20.6209 3.45607 21.2447 3.477361 21.9159 3.0787C21.9162 3.07876 21.9165 3.07881 21.9169 3.07886C22.5877 3.18053 23.0515 3.82348 22.953 4.51494H22.9531Z",fill:"currentColor"})})},q=e=>{let{className:l}=e;return(0,t.jsx)("svg",{className:l,viewBox:"0 0 24 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsxs)("g",{transform:"translate(1.5, 2)",children:[(0,t.jsx)("path",{d:"M19.8861 6.948C20.1381 6.62875 20.1381 6.18943 19.8861 5.87019C18.7352 4.41236 15.19 0.5 10.2875 0.5C5.38505 0.5 1.83985 4.41237 0.689013 5.87019C0.436995 6.18943 0.436996 6.62875 0.689014 6.948C1.83985 8.40582 5.38505 12.3182 10.2875 12.3182C15.19 12.3182 18.7352 8.40582 19.8861 6.948Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("circle",{cx:"10.2875",cy:"6.409",r:"3.68421",stroke:"currentColor",strokeWidth:"0.9"}),(0,t.jsx)("circle",{cx:"10.2875",cy:"6.409",r:"1.57895",stroke:"currentColor",strokeWidth:"0.8"})]})})};var W=function(e){return e[e.BookingConfirmed=0]="BookingConfirmed",e[e.CheckUpComplete=1]="CheckUpComplete",e[e.ResultsReady=2]="ResultsReady",e[e.ReviewComplete=3]="ReviewComplete",e}({});let Z=()=>{let{booking:e,report:t,sourceFiles:l}=(0,u.useHealthReport)(),{t:a}=(0,m.useT)();return(0,i.useMemo)(()=>{let s=new Date,i=!!(null==e?void 0:e.confirmedBookingStartTime),n=!1;if(null==e?void 0:e.confirmedBookingStartTime){let t=e.confirmedBookingStartTime.toDate();n=s.getTime()-t.getTime()>18e6}let r=l&&l.length>0,o=!!(null==t?void 0:t.releasedOn),d=a(F.CoordinateAppointment);o?d=a(F.ResultsReady):r&&!o?d=a(F.CreationReport):n&&!r?d=a(F.CheckUpComplete):i&&!n&&(d=a(F.BookingConfirmed));let c=[{status:0,isComplete:i,label:i?a("Booking confirmed"):a("Booking requested"),pageTitle:d,icon:U},{status:1,isComplete:n,label:n?a("Check-up completed"):a("Check-up upcoming"),pageTitle:d,icon:L},{status:2,isComplete:r,label:r?a("Results completed"):a("Data pending"),pageTitle:d,icon:V},{status:3,isComplete:o,label:o?a("Review completed"):a("Review pending"),pageTitle:d,icon:q}],u=c.filter(e=>e.isComplete);return{statuses:c,completeStatuses:u,latestCompletedStatus:(0,z.default)(u)}},[e,t,l,a])},G=()=>{let{loadingReport:e}=(0,u.useHealthReport)(),a=(()=>{var e;let{view:t}=(0,l.useHealthReportParamView)(),{report:a}=(0,u.useHealthReport)(),{latestCompletedStatus:s,statuses:n}=Z(),{t:r}=(0,m.useT)();return(0,i.useMemo)(()=>{if("report"===t)return{title:r("Health report"),showReportDate:!!(null==a?void 0:a.releasedOn),shouldShow:!0,name:"report-page"};if("actions"===t)return{title:r("Action plan"),showReportDate:!!(null==a?void 0:a.releasedOn),shouldShow:!0,name:"actions-page",badgeText:r("BETA")};if("home"===t){var e,l,i,o,d;let t=(null==a||null==(e=a.patientData)?void 0:e.firstName)||"",c=t?r("Hello {{userName}},",{userName:t}):r("Hello,"),u=null!=(i=null==s?void 0:s.status)?i:W.BookingConfirmed;return{preTitle:c,title:null!=(d=null!=(o=null==s?void 0:s.pageTitle)?o:null==(l=n[0])?void 0:l.pageTitle)?d:"",showReportDate:!1,shouldShow:!0,name:"home-page-status-".concat(u)}}return null},[t,null==a?void 0:a.releasedOn,s,null==a||null==(e=a.patientData)?void 0:e.firstName,r,n])})();return!e&&a&&a.shouldShow?(0,t.jsx)("div",{role:"heading","aria-level":1,children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[a.preTitle&&(0,t.jsx)("div",{className:"text-sm md:text-base",children:a.preTitle}),(0,t.jsxs)("div",{className:"flex w-full items-center gap-2 text-2xl leading-tight",children:[a.title,a.badgeText&&(0,t.jsx)(E.Badge,{variant:"default",className:"border-none shadow-none","aria-label":"".concat(a.badgeText," feature"),children:a.badgeText})]})]})}):null},Y="md:w-[322px]",X=()=>(0,t.jsxs)("div",{role:"presentation",children:[(0,t.jsx)("div",{className:"pt-6",children:(0,t.jsx)(K,{})}),(0,t.jsx)("header",{className:"mt-8 mb-5 w-full",children:(0,t.jsx)(G,{})})]});function J(){let{view:e}=(0,l.useHealthReportParamView)();return(0,t.jsxs)("aside",{className:(0,a.cn)("mx-10 hidden shrink-0 flex-col md:flex",Y),"aria-label":"Report sidebar",children:[(0,t.jsx)(X,{}),("report"===e||"actions"===e)&&(0,t.jsx)(_,{}),"report"===e&&(0,t.jsx)("div",{className:"mt-6 flex-1 overflow-y-auto",role:"presentation",children:(0,t.jsx)(s.OrganSystemNavSidebar,{})})]})}let Q=(0,i.createContext)({dataPointIdToContainerRef:new Map,scrollToDataPoint:()=>{}}),$=e=>{let{children:l}=e,a=(0,i.useRef)(new Map);return(0,t.jsx)(Q.Provider,{value:{dataPointIdToContainerRef:a.current,scrollToDataPoint:e=>{let t=a.current.get(e);if(t){var l;null==(l=t.current)||l.scrollIntoView({behavior:"smooth"})}}},children:l})};var ee=e.i(225305),et=e.i(767263);function el(e){let{value:l,className:s,colorClassName:i="text-current",trackClassName:n="text-zinc-300/70",strokeWidth:r=3}=e,o=Math.max(0,Math.min(100,l)),d=(20-r)/2,c=2*Math.PI*d;return(0,t.jsxs)("svg",{viewBox:"0 0 ".concat(20," ").concat(20),width:20,height:20,className:(0,a.cn)(s),children:[(0,t.jsx)("circle",{cx:10,cy:10,r:d,fill:"none",stroke:"currentColor",className:n,strokeWidth:r,strokeLinecap:"round"}),(0,t.jsx)("circle",{cx:10,cy:10,r:d,fill:"none",stroke:"currentColor",className:i,strokeWidth:r,strokeLinecap:"round",strokeDasharray:c,strokeDashoffset:c-o/100*c,transform:"rotate(-90 ".concat(10," ").concat(10,")")})]})}let ea=e=>{let{expectedOnDate:l,fallbackText:a}=e,{t:s}=(0,m.useT)(),{daysRemaining:n,progressValue:r}=(0,i.useMemo)(()=>{if(!l)return{daysRemaining:null,progressValue:0};let e=new Date,t=Math.max(0,Math.ceil((l.getTime()-e.getTime())/864e5)),a=Math.max(0,Math.min(100,t/7*100));return{daysRemaining:t,progressValue:a}},[l]),o=null!==n&&n<=0,d=o?s("Expected soon"):null!==n?s("Expected in ".concat(n," day").concat(1!==n?"s":"")):a;return(0,t.jsxs)(E.Badge,{variant:"inProgress",className:"flex items-center gap-2 bg-blue-200/40 bg-none pb-[3px] text-blue-950",children:[null!==n&&!o&&(0,t.jsx)(el,{value:r,className:"size-4 p-[2px]",strokeWidth:2}),d]})};e.i(436180);var es=e.i(98925);let ei=e=>{let l,a,{t:s,i18n:n}=(0,m.useT)(),{report:r}=(0,u.useHealthReport)(),o=(0,b.useRouter)(),d=(e=>{let{questionnaireResponses:t}=(0,u.useHealthReport)();return(0,i.useMemo)(()=>t&&t.find(t=>t.reportKey===e||!t.reportKey&&!t.isComplete)||null,[t,e])})(e),c=d?(l=(null==d?void 0:d.uid)||"",a=(null==n?void 0:n.language)||"en","/".concat(a,"/questionnaire?responseId=").concat(l,"&reportKey=").concat(e)):null;if(!c)return null;let x=null==d?void 0:d.isComplete,p=d&&(d.progress>0||d.currentPage);return x?{title:s("Questionnaire complete"),subtitle:s("Your response has been sent to our health team"),badge:(0,t.jsx)(E.Badge,{variant:"complete",children:s("Complete")}),showUntilStatus:W.ReviewComplete,onClick:()=>{(0,D.logEvent)("homepage.questionnaire_clicked",void 0,{userKey:r.uid}),o.push(c)},disabled:!0}:p?{title:s("Continue your questionnaire"),subtitle:s("Share your health and lifestyle details"),badge:(0,t.jsx)(E.Badge,{variant:"inProgress",children:s("In progress")}),showUntilStatus:W.ReviewComplete,onClick:()=>{(0,D.logEvent)("homepage.questionnaire_clicked",void 0,{userKey:r.uid}),o.push(c)}}:{title:s("Complete questionnaire"),subtitle:s("Share your health and lifestyle details"),badge:(0,t.jsx)(E.Badge,{variant:"required",children:s("Required")}),showUntilStatus:W.ReviewComplete,onClick:()=>{(0,D.logEvent)("homepage.questionnaire_clicked",void 0,{userKey:r.uid}),o.push(c)}}},en=e=>{let{reportKey:l}=e,a=ei(l);return!a||a.disabled?null:(0,t.jsxs)("button",{onClick:a.onClick,className:"gradient-light-blue flex w-full cursor-pointer items-center justify-between gap-3 rounded-xl px-4 py-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)("img",{src:"/icons/questionnaire_icon.svg",className:"size-5 text-blue-950"}),(0,t.jsx)("div",{className:"text-sm text-blue-950 md:text-base",children:a.title})]}),(0,t.jsx)("div",{className:"flex grow justify-end",children:(0,t.jsx)(N.ChevronRight,{className:"size-4 shrink-0 text-blue-950",strokeWidth:2})})]})};var er=e.i(197481);let eo=e=>{let{title:l,subtitle:a,countdownBadge:s,actionButton:i,children:n}=e;return(0,t.jsx)(er.ReportEntryCard,{className:"p-0 shadow-sm",children:(0,t.jsxs)("div",{className:"relative flex aspect-square w-full items-center justify-center md:aspect-auto md:h-[500px]",children:[(0,t.jsx)("div",{className:"pointer-events-none w-full p-4 opacity-40",children:n}),(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center gap-3 py-4 backdrop-blur-md",children:[(0,t.jsxs)("div",{className:"flex grow flex-col items-center justify-center gap-3 px-12 text-center md:grow-0",children:[s&&(0,t.jsx)("div",{children:s}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1 text-center",children:[(0,t.jsx)("div",{className:"text-lg md:text-xl",children:l}),(0,t.jsx)("div",{className:"text-xs text-gray-600 md:text-sm",children:a})]})]}),i&&(0,t.jsx)("div",{className:"w-full px-4 md:max-w-sm",children:i})]})]})})};var ed=e.i(27910);let ec=[{uid:"dummy-followup-1",type:{},referralRequired:!1,followupInternalBooking:!1,nextSteps:"Follow up with specialist",triggeringDataPointKeys:[],userKey:"dummy",templateId:null,title:"Specialist Consultation",subHeader:"Recommended follow-up",description:"Schedule appointment with specialist",bannerImage:{url:"https://via.placeholder.com/64",id:"dummy",type:"image/jpeg"},isMatch:!0,createdAt:es.Timestamp.now(),updatedAt:es.Timestamp.now()},{uid:"dummy-followup-2",type:{},referralRequired:!1,followupInternalBooking:!1,nextSteps:"Schedule blood work",triggeringDataPointKeys:[],userKey:"dummy",templateId:null,title:"Blood Work",subHeader:"Routine check",description:"Complete blood count",bannerImage:{url:"https://via.placeholder.com/64",id:"dummy2",type:"image/jpeg"},isMatch:!0,createdAt:es.Timestamp.now(),updatedAt:es.Timestamp.now()}],eu=[{uid:"dummy-optimisation-1",frequency:"Daily",expectedBenefit:"Improved health",type:{},triggeringDataPointKeys:[],userKey:"dummy",templateId:null,title:"Exercise Routine",subHeader:"Daily activity",description:"30 minutes cardio",bannerImage:{url:"https://via.placeholder.com/64",id:"dummy3",type:"image/jpeg"},isMatch:!0,createdAt:es.Timestamp.now(),updatedAt:es.Timestamp.now()},{uid:"dummy-optimisation-2",frequency:"Weekly",expectedBenefit:"Better sleep",type:{},triggeringDataPointKeys:[],userKey:"dummy",templateId:null,title:"Meditation",subHeader:"Stress reduction",description:"15 minutes daily meditation",bannerImage:{url:"https://via.placeholder.com/64",id:"dummy4",type:"image/jpeg"},isMatch:!0,createdAt:es.Timestamp.now(),updatedAt:es.Timestamp.now()}],ex=()=>{let{t:e}=(0,m.useT)(),{latestCompletedStatus:l}=Z(),{booking:a,report:s}=(0,u.useHealthReport)(),n=e("Your action plan is coming soon."),r=e("Once your results are in, your doctor will create a personalised action plan just for you, based on what your body needs."),{title:o,subtitle:d,expectedDate:c}=(0,i.useMemo)(()=>{var e,t;let s=null!=(e=null==l?void 0:l.status)?e:W.BookingConfirmed;if(s>=W.ReviewComplete)return{title:"",subtitle:"",expectedDate:null};if(s>W.BookingConfirmed&&s<W.ReviewComplete){let e=null==a||null==(t=a.confirmedBookingStartTime)?void 0:t.toDate();if(e)return{title:n,subtitle:r,expectedDate:new Date(e.getTime()+6048e5)}}return{title:n,subtitle:r,expectedDate:null}},[l,a,n,r]);return(0,t.jsxs)(eo,{title:o,subtitle:d,countdownBadge:(0,t.jsx)(ea,{expectedOnDate:c,fallbackText:e("Expected after visit")}),actionButton:(0,t.jsx)(en,{reportKey:s.uid}),children:[(0,t.jsx)(ed.FollowUpsAndActionsLinkDisplay,{followups:ec,optimisations:eu,className:"bg-white"}),(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)(ed.FollowUpsAndActionsLinkDisplay,{followups:ec,optimisations:eu,className:"bg-white"})})]})};var em=e.i(987749),ep=e.i(173519),eh=function(e){return e.ACTION="action",e.REFERRAL_GUIDE="referral-guide",e.PREPARATION_INSTRUCTIONS="preparation-instructions",e}({});let eg=(0,i.createContext)(null),ef=()=>{let e=(0,i.useContext)(eg);if(null===e)throw Error("useReportPageSidePanel must be used within a ReportPageSidePanelProvider");return e},ev=e=>{let{children:l}=e,[a,s]=(0,ep.useSearchParamSyncedState)("action",""),[n,r]=(0,i.useState)(null),o=(0,i.useCallback)(()=>{r(null),s("")},[s]),d=!!a||!!n;return(0,i.useEffect)(()=>{if(!d)return;let e=e=>{"Escape"===e.key&&o()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[d,o]),(0,t.jsx)(eg.Provider,{value:{openForActionKey:a,openDetailsForActionKey:e=>{s(e),r(null)},mode:n,openReferralGuide:()=>{r("referral-guide"),s("")},openPreparationInstructions:()=>{r("preparation-instructions"),s("")},closeSidePanel:o},children:l})},ej=e=>{let{item:l}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 pt-4 pb-5 ".concat(l.disabled?"cursor-default opacity-60":"cursor-pointer"),onClick:l.disabled?void 0:l.onClick,children:[(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start gap-2",children:[l.badge&&l.badge,(0,t.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,t.jsx)("div",{className:"text-sm leading-tight",children:l.title}),l.subtitle&&(0,t.jsx)("div",{className:"text-sm leading-snug",children:l.subtitle})]})]}),!l.disabled&&(0,t.jsx)(N.ChevronRight,{className:"size-4"})]})},eb=()=>{let{t:e}=(0,m.useT)(),{latestCompletedStatus:l}=Z(),{report:a}=(0,u.useHealthReport)(),{openPreparationInstructions:s}=ef(),[n,r]=(0,i.useState)(!0),o=ei(a.uid),d=(0,em.filterBool)([o,{title:e("Read preparation instruction"),subtitle:e("Review guidelines before your check-up"),showUntilStatus:W.CheckUpComplete,onClick:()=>{(0,D.logEvent)("homepage.preparation_instructions_clicked",void 0,{userKey:a.uid}),s()}}]).filter(e=>!e.showUntilStatus||e.showUntilStatus>((null==l?void 0:l.status)||0));return 0===d.length?null:(0,t.jsxs)("div",{className:"bg-background flex w-full flex-col overflow-clip rounded-xl",role:"region","aria-label":e("To-do list"),children:[(0,t.jsxs)("button",{className:"flex w-full cursor-pointer items-center justify-between px-4 pt-3 pb-4",onClick:()=>{let e=!n;r(e),(0,D.logEvent)(e?"homepage.todo_list_expanded":"homepage.todo_list_collapsed",void 0,{userKey:a.uid})},"aria-expanded":n,"aria-controls":"todo-list-items",children:[(0,t.jsxs)("span",{className:"text-foreground text-sm leading-5",children:[e("To-do list")," (",d.length,")"]}),n?(0,t.jsx)(g.ChevronDown,{className:"size-4","aria-hidden":"true"}):(0,t.jsx)(N.ChevronRight,{className:"size-4","aria-hidden":"true"})]}),n&&(0,t.jsx)("ul",{className:"flex flex-col",id:"todo-list-items",role:"list","aria-label":e("Tasks"),children:d.map((e,l)=>(0,t.jsxs)("li",{children:[(0,t.jsx)("div",{className:"bg-selected-border h-px",role:"separator","aria-hidden":"true"}),(0,t.jsx)(ej,{item:e})]},l))})]})};var ew=e.i(311561),eN=e.i(87316),ey=e.i(952571);let eC=e=>{let{isOpen:l,onClose:a,packageProduct:s,addOnProducts:i}=e,{t:n}=(0,m.useT)();return(0,t.jsx)(R.Dialog,{open:l,onOpenChange:e=>!e&&a(),children:(0,t.jsxs)(R.DialogContent,{className:"shadow-elevated-soft max-w-[400px] gap-5 rounded-[20px] p-4",children:[(0,t.jsx)(R.DialogHeader,{children:(0,t.jsx)(R.DialogTitle,{className:"text-[15px] leading-none font-normal text-[#2d2d2d]",children:n("Booking details")})}),(0,t.jsxs)("div",{className:"bg-background flex w-full flex-col gap-5 rounded-[16px] p-4",children:[s&&(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-[14px] leading-[1.2] text-[#2d2d2d]",children:n("Checkup details")}),(0,t.jsx)(k,{product:s})]}),i.length>0&&(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-[14px] leading-[1.2] text-[#2d2d2d]",children:n("Add-ons")}),i.filter(e=>void 0!==e).map(e=>(0,t.jsx)(k,{product:e},e.uid))]})]})]})})};var ek=e.i(346897);let eR=e=>{let{clinic:l,link:a}=e,{t:s}=(0,m.useT)(),{report:i}=(0,u.useHealthReport)(),n=w(l),r=(0,t.jsx)("div",{className:"flex flex-col gap-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"size-10 shrink-0 overflow-hidden rounded-[8px] bg-gradient-to-br from-[rgba(147,182,238,0.2)] to-[rgba(81,130,208,0.2)]",children:l.photo_url&&(0,t.jsx)("img",{src:"https://booking.aheadhealth.com/".concat(l.photo_url),alt:l.name,className:"size-full object-cover"})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[(0,t.jsx)("div",{className:"text-[14px] leading-none text-[#202020]",children:l.name}),(0,t.jsx)("div",{className:"text-[12px] leading-[1.2] text-[#2d2d2d]",children:l.address})]}),a&&n&&(0,t.jsxs)("div",{className:"flex min-w-0 items-center justify-center gap-1.5","aria-hidden":"true",children:[(0,t.jsx)(ek.MapPin,{className:"size-4 text-black opacity-80"}),(0,t.jsx)("span",{className:"text-center text-xs leading-[1.1] text-black opacity-80 md:text-sm",children:s("Get directions")}),(0,t.jsx)(N.ChevronRight,{className:"size-4"})]})]})});return a&&n?(0,t.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer","aria-label":"".concat(s("Get directions")," to ").concat(l.name," at ").concat(l.address," - opens Google Maps in new tab"),className:"bg-background flex flex-col gap-6 p-4",role:"button",onClick:()=>{(0,D.logEvent)("homepage.get_directions_clicked",void 0,{userKey:i.uid})},children:r}):(0,t.jsx)("div",{className:"bg-background flex flex-col gap-6 p-4","aria-label":"Clinic: ".concat(l.name,", ").concat(l.address),children:r})},eD=e=>{let{title:l,children:a}=e;return(0,t.jsxs)("section",{className:"flex w-full flex-col gap-4","aria-label":l,children:[(0,t.jsx)("header",{className:"flex items-center justify-between",children:(0,t.jsx)("div",{className:"text-base text-[#2d2d2d]",role:"heading","aria-level":2,children:l})}),a]})},eS=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,l=e.toDate(),a=l.getHours(),s=l.getMinutes(),i=new Date(l.getTime()+60*t*1e3),n=i.getHours(),r=i.getMinutes(),o=(e,t)=>{let l=e.toString(),a=t.toString().padStart(2,"0");return"".concat(l,":").concat(a)};return"".concat(o(a,s)," - ").concat(o(n,r))},eP=()=>{var e,l,a;let{booking:s,clinics:n,products:r,report:o}=(0,u.useHealthReport)(),{latestCompletedStatus:d}=Z(),[c,x]=(0,i.useState)(!1),{t:p,i18n:h}=(0,m.useT)(),g=(0,i.useMemo)(()=>(null==s?void 0:s.packageProductKey)?r.find(e=>e.uid===s.packageProductKey):null,[s,r]),f=(0,i.useMemo)(()=>(null==s?void 0:s.addOnProductKeys)?(0,em.filterBool)(s.addOnProductKeys.map(e=>r.find(t=>t.uid===e))):[],[s,r]),v=(0,i.useMemo)(()=>(null==s?void 0:s.clinicKey)?n.find(e=>e.uid===s.clinicKey):null,[s,n]),j=(0,i.useMemo)(()=>[g,...f].filter(Boolean),[g,f]),b=(0,i.useMemo)(()=>j.map(e=>{var t;let l=null==e||null==(t=e.images)?void 0:t[0];return l?"https://booking.aheadhealth.com/".concat(l):null}),[j]);if(!s)return null;let w=!!s.confirmedBookingStartTime,N=(null!=(l=null==d?void 0:d.status)?l:-1)>=W.CheckUpComplete,y=e=>new Intl.DateTimeFormat(h.language,{month:"long",day:"numeric"}).format(e.toDate()),C=(null!=(a=null==d?void 0:d.status)?a:-1)<W.CheckUpComplete;return(0,t.jsxs)(eD,{title:p("Check-up details"),children:[(0,t.jsxs)("div",{className:"shadow-card flex w-full flex-col gap-4 rounded-[20px] bg-white p-4",children:[(0,t.jsxs)("button",{className:"flex w-full cursor-pointer items-center gap-4 text-left",onClick:()=>{(0,D.logEvent)("homepage.booking_details_opened",void 0,{userKey:o.uid}),x(!0)},"aria-label":"".concat((null==g?void 0:g.name)||"Unknown package").concat(f.length>0?" + ".concat(f.length," add-on").concat(1!==f.length?"s":""):"",". ").concat(p("Click for details")),"aria-haspopup":"dialog",children:[(0,t.jsx)("div",{className:"flex h-16 w-20 min-w-0 shrink-0 items-center justify-center","aria-hidden":"true",children:(0,t.jsx)(ew.StackDisplay,{className:"h-16 w-16",nodes:b.map((e,l)=>e?(0,t.jsx)("img",{src:e,alt:"",className:"size-full rounded-[14px] object-cover"},l):(0,t.jsx)("div",{className:"bg-background size-full rounded-[14px]"},l)),stackItemClassName:"h-16 w-16 rounded-[14px]"})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-[3px]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:(null==g?void 0:g.name)||"Unknown package"}),(0,t.jsx)(ey.Info,{className:"mt-[2px] size-3","aria-hidden":"true"})]}),f.length>0&&(0,t.jsxs)("div",{className:"text-sm",children:["+ ",f.length," add-on",1!==f.length?"s":""]})]})]}),(0,t.jsx)("div",{className:"flex w-full flex-col gap-2",children:(0,t.jsxs)("div",{className:"overflow-clip rounded-[12px]",children:[w&&s.confirmedBookingStartTime?(0,t.jsx)("div",{className:"bg-background flex flex-col gap-6 p-4",children:(0,t.jsx)("div",{className:"flex flex-col gap-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-[8px] bg-gradient-to-br from-[rgba(147,182,238,0.2)] to-[rgba(81,130,208,0.2)]",children:(0,t.jsx)(eN.Calendar,{className:"size-6"})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[(0,t.jsx)("div",{className:"text-sm leading-none",children:y(s.confirmedBookingStartTime)}),(0,t.jsx)("div",{className:"flex items-center gap-1.5",children:(0,t.jsx)("div",{className:"text-xs leading-none",children:eS(s.confirmedBookingStartTime,(null==g?void 0:g.duration_minutes)||60)})})]}),(0,t.jsx)(E.Badge,{variant:"inProgress",children:N?p("Completed"):p("Confirmed")})]})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"bg-background h-px w-full"}),(0,t.jsx)("div",{className:"bg-background flex flex-col gap-6 p-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-foreground text-sm leading-none",children:p("Slot preferences")}),null==(e=s.requestedTimeSlotStarts)?void 0:e.map((e,l)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-[8px] bg-gradient-to-br from-[rgba(147,182,238,0.2)] to-[rgba(81,130,208,0.2)]",children:(0,t.jsx)(eN.Calendar,{className:"text-foreground size-6"})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[(0,t.jsx)("div",{className:"text-foreground text-sm leading-none",children:y(e)}),(0,t.jsx)("div",{className:"text-foreground text-xs leading-none",children:eS(e,(null==g?void 0:g.duration_minutes)||60)})]}),0===l&&(0,t.jsx)(E.Badge,{variant:"inProgress",children:p("First choice")})]},l))]})})]}),v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-px w-full bg-[#e5e7eb]"}),(0,t.jsx)(eR,{clinic:v,link:C})]})]})})]}),(0,t.jsx)(eC,{isOpen:c,onClose:()=>x(!1),packageProduct:g||null,addOnProducts:f,productPrices:(null==s?void 0:s.productPrices)||{}})]})};var eT=e.i(331153),eB=e.i(855079),eM=e.i(575897),eH=e.i(773280),eA=e.i(165981);let eI=(e,t,l)=>({uid:"dummy-".concat(e),sourceFileKey:"dummy-source",dataPoint:{textInfo:null,assessment:{severity:eA.DataPointSeverity.Normal},biomarkerData:{biomarkerId:e,value:t,referenceRanges:[],biomarkerNameFromSource:"Sample"},tags:{source:l,organ:null,panelIds:[],gender:null,infoType:null}},info:{uid:e,aheadId:e,domainSpecificCode:null,loinc:null,name:"Sample Biomarker",nameGerman:null,metric:"mg/dL",displayRangeMin:0,displayRangeMax:100,active:!0,idx:"0",referenceRangeMin:50,referenceRangeMax:150,outOfRangeHighIndication:eA.OutOfRangeIndication.Bad,inRangeIndication:eA.OutOfRangeIndication.Good,outOfRangeLowIndication:eA.OutOfRangeIndication.Bad},createdAt:es.Timestamp.now(),updatedAt:es.Timestamp.now()}),e_=[eI("biomarker-1",120,eA.DataPointSource.Blood),eI("biomarker-2",85,eA.DataPointSource.Blood),eI("biomarker-3",95,eA.DataPointSource.Blood),eI("biomarker-4",110,eA.DataPointSource.Blood),eI("biomarker-5",75,eA.DataPointSource.Blood),eI("biomarker-6",180,eA.DataPointSource.Blood),eI("biomarker-7",92,eA.DataPointSource.Blood),eI("biomarker-8",105,eA.DataPointSource.Blood),eI("imaging-1",45,eA.DataPointSource.ImageBiomarker),eI("imaging-2",52,eA.DataPointSource.ImageBiomarker),eI("imaging-3",38,eA.DataPointSource.ImageBiomarker)],eO={uid:"dummy-report",patientKey:"dummy-patient",title:"Sample Report",createdAt:es.Timestamp.now(),updatedAt:es.Timestamp.now(),patientData:{birthday:"1985-01-01",firstName:"Sample",lastName:"Patient"}},eK=new Date,eE=()=>{let{t:e}=(0,m.useT)(),{latestCompletedStatus:l}=Z(),{booking:a,report:s}=(0,u.useHealthReport)(),{title:n,subtitle:r,expectedDate:o}=(0,i.useMemo)(()=>{var t,s;let i=null!=(t=null==l?void 0:l.status)?t:W.BookingConfirmed;if(i>=W.ReviewComplete)return{title:"",subtitle:"",expectedDate:null};let n=e("Your health report will be ready soon..."),r=e("You’ll get a clear, doctor-reviewed overview of your health once it’s complete.");if(i>W.BookingConfirmed&&i<W.ReviewComplete){let e=null==a||null==(s=a.confirmedBookingStartTime)?void 0:s.toDate();if(e)return{title:n,subtitle:r,expectedDate:new Date(e.getTime()+6048e5)}}return{title:n,subtitle:r,expectedDate:null}},[l,a,e]);return(0,t.jsx)(eo,{title:n,subtitle:r,countdownBadge:(0,t.jsx)(ea,{expectedOnDate:o,fallbackText:e("Expected after visit")}),actionButton:(0,t.jsx)(en,{reportKey:s.uid}),children:(0,t.jsxs)("div",{className:"grid w-full grid-cols-2 gap-4",children:[(0,t.jsx)(eT.BioAgeCardBase,{chronologicalAge:40,bioAge:38.5,dataPoints:e_,report:eO,effectiveReportDate:eK,showInfoIcon:!1}),(0,t.jsx)(eH.WholeReportBloodLabSummaryBase,{dataPoints:e_}),(0,t.jsx)(eM.ImagingSummaryCardBase,{dataPoints:e_}),(0,t.jsx)(eB.FindingsSummaryBase,{dataPoints:[]})]})})},ez=()=>{let{dataPointsForThisReport:e,report:l,effectiveReportDate:a}=(0,u.useHealthReport)();return(0,t.jsxs)("div",{className:"grid w-full grid-cols-2 gap-4",children:[(0,t.jsx)(eT.BioAgeCard,{dataPoints:e.all,report:l,effectiveReportDate:a}),(0,t.jsx)(eH.WholeReportBloodLabSummary,{}),(0,t.jsx)(eM.ImagingSummaryCard,{}),(0,t.jsx)(eB.FindingsSummary,{})]})},eF=()=>{var e;let{t:a}=(0,m.useT)(),{latestCompletedStatus:s}=Z(),{report:i}=(0,u.useHealthReport)(),n=null!=(e=null==s?void 0:s.status)?e:W.BookingConfirmed,{setView:r}=(0,l.useHealthReportParamView)();return n>=W.ReviewComplete?(0,t.jsx)(eD,{title:a("Health report"),children:(0,t.jsx)("div",{className:"cursor-pointer",onClick:e=>((0,D.logEvent)("homepage.report_preview_clicked",void 0,{userKey:i.uid}),r("report"),e.preventDefault(),e.stopPropagation(),!1),children:(0,t.jsx)(ez,{})})}):n>=W.CheckUpComplete?(0,t.jsx)(eD,{title:a("Health report"),children:(0,t.jsx)(eE,{})}):null},eU=()=>{var e;let{t:l}=(0,m.useT)(),{latestCompletedStatus:a}=Z(),{actionSummary:s,followupsForCurrentReport:i,optimisationsForCurrentReport:n}=(0,u.useHealthReport)(),r=null!=(e=null==a?void 0:a.status)?e:W.BookingConfirmed;return r>=W.ReviewComplete?s?(0,t.jsx)(eD,{title:l("Action plan"),children:(0,t.jsx)(ed.FollowUpsAndActionsLinkDisplay,{followups:i,optimisations:n,className:"bg-white"})}):null:r>=W.CheckUpComplete?(0,t.jsx)(eD,{title:l("Action plan"),children:(0,t.jsx)(ex,{})}):null};var eL=e.i(481175);let eV=e=>{let{icon:l,state:s,width:i}=e;return(0,t.jsx)("div",{className:"z-10 flex shrink-1 justify-center",style:{width:i},children:(0,t.jsxs)("div",{className:"relative",children:["in-progress"===s&&(0,t.jsx)("div",{className:"absolute top-1/2 left-1/2 h-[calc(100%+10px)] w-[calc(100%+10px)] -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-blue-200/50 bg-white"}),(0,t.jsx)("div",{className:(0,a.cn)("relative flex h-10 w-10 items-center justify-center rounded-full","completed"===s?"bg-blue-950":"in-progress"===s?"gradient-light-blue":"border border-zinc-800/10 bg-white"),children:"completed"===s?(0,t.jsx)(h.Check,{className:"h-6 w-6 text-white",strokeWidth:2}):(0,t.jsx)(l,{className:"text-foreground h-6 w-6",strokeWidth:1.5})})]})})},eq=e=>{let{label:l,state:s,width:i}=e;return(0,t.jsx)("div",{className:"flex justify-center",style:{width:i},children:(0,t.jsx)("div",{className:(0,a.cn)("text-foreground text-center text-xs leading-[1.2] md:text-sm","in-progress"===s&&"font-medium"),children:l})})},eW=e=>{let{invisible:l=!1}=e;return(0,t.jsx)("div",{className:"relative flex-grow","aria-hidden":"true",children:(0,t.jsx)("div",{className:(0,a.cn)("border-px absolute inset-0 h-px flex-grow border-t border-solid border-zinc-800/10",l&&"opacity-0"),style:{width:"calc(100% + ".concat(80,"px)"),transform:"translateX(-".concat(40,"px)")}})})},eZ=()=>{var e;let{statuses:l,latestCompletedStatus:a}=Z(),{t:s}=(0,m.useT)(),n=e=>{var t;let l=null!=(t=null==a?void 0:a.status)?t:-1;return e<=l?"completed":e===l+1?"in-progress":"incomplete"},r=(null!=(e=null==a?void 0:a.status)?e:-1)+1,o=l.length,d=Math.round(r/o*100);return(0,t.jsxs)("nav",{className:"flex w-full flex-col gap-2","aria-label":s("Report progress"),role:"navigation",children:[(0,t.jsx)("div",{className:"flex w-full items-center",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":o,"aria-label":"".concat(r," of ").concat(o," steps completed (").concat(d,"%)"),children:l.map((e,a)=>{let s=n(a),r=a===l.length-1;return(0,t.jsxs)(i.default.Fragment,{children:[(0,t.jsx)(eV,{icon:e.icon,state:s,width:"".concat(80,"px")}),!r&&(0,t.jsx)(eW,{})]},e.status)})}),(0,t.jsx)("div",{className:"flex w-full items-start","aria-hidden":"true",children:l.map((e,a)=>{let s=n(a),r=a===l.length-1;return(0,t.jsxs)(i.default.Fragment,{children:[(0,t.jsx)(eq,{label:e.label,state:s,width:"".concat(80,"px")}),!r&&(0,t.jsx)(eW,{invisible:!0})]},e.status)})})]})},eG=()=>{(0,eL.useLogEventOnMount)("homepage","homepage_viewed",null);let{t:e}=(0,m.useT)();return(0,t.jsx)("div",{className:"flex min-h-0 w-full grow flex-col items-center",role:"region","aria-label":e("Home"),children:(0,t.jsxs)("div",{className:"report-content-container flex min-h-0 flex-col gap-8",children:[(0,t.jsxs)("section",{className:"shadow-card flex w-full flex-col gap-5 rounded-[20px] bg-white p-4","aria-label":e("Progress and tasks"),children:[(0,t.jsx)(eZ,{}),(0,t.jsx)(eb,{})]}),(0,t.jsx)(eP,{}),(0,t.jsx)(eF,{}),(0,t.jsx)(eU,{})]})})};var eY=e.i(532323),eX=e.i(405962),eJ=e.i(951984),eQ=e.i(589282),e$=e.i(908083);e.i(151718);var e0=e.i(506973),e1=e.i(167881),e2=e.i(996264);let e3=()=>{let{user:e,loading:l,isInternal:a}=(0,eJ.useUser)(),s=(0,b.useRouter)(),{t:i}=(0,m.useT)();if(console.log("user",e),a&&!l)return(0,t.jsx)(e2.AdminPageErrorOverlay,{isLoggedIn:!!e});let n=null;return n=l?(0,t.jsx)(eY.WholeHeightLoading,{}):e?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{children:i("You are not authorized to view this page.")}),(0,t.jsx)(e1.Button,{variant:"default",className:"self-end",size:"sm",onClick:()=>{(0,e0.signOut)((0,e0.getAuth)((0,e$.initFb)().app))},children:"Sign in with a different account"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:i("You must be logged in to view this page.")}),(0,t.jsx)(e1.Button,{className:"self-end",onClick:()=>{s.push((0,eQ.addParamsToLink)("/sign_in",{redirect:window.location.pathname}))},children:i("Login")})]}),(0,t.jsx)(eX.ErrorOverlay,{level:"warning",title:i("Unauthorized"),children:(0,t.jsx)("div",{className:"flex flex-col justify-between gap-2",children:n})})};var e5=e.i(257953),e8=e.i(459217),e4=e.i(736749),e6=e.i(663608),e7=e.i(184762),e9=e.i(387888),te=function(e){return e.ActionPage="ActionPage",e}({}),tt=e.i(390421),tl=e.i(475254);let ta=(0,tl.default)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]),ts=(0,tl.default)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);var ti=e.i(266303),tn=e.i(629873);let tr=e=>{let{IconComponent:l,selected:s,onClick:i}=e;return(0,t.jsx)("div",{onClick:i,className:(0,a.cn)("relative cursor-pointer rounded-xl border border-zinc-800/20 px-4 py-2.5",s?"bg-aubergine-600 text-white":""),children:(0,t.jsx)(l,{className:"h-4 w-4"})})},to=e=>{let{closeModal:l,isHappy:a,updateFeedback:s,feedback:i}=e,{t:n}=(0,m.useT)();return(0,t.jsx)(ti.ReportPageModalContent,{closeModal:l,className:"overflow-scroll md:h-fit",children:(0,t.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)(R.DialogHeader,{className:"flex w-full flex-col items-center gap-1",children:[(0,t.jsx)(R.DialogTitle,{className:"text-xl font-normal",children:n("Is your plan helpful so far?")}),(0,t.jsx)("div",{className:"text-sm",children:n("Give us your feedback")})]}),(0,t.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(tr,{IconComponent:ts,selected:a,onClick:()=>s({isHappy:!0})}),(0,t.jsx)(tr,{IconComponent:ta,selected:!a,onClick:()=>s({isHappy:!1})})]})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"text-sm",children:n("What was helpful?")}),(0,t.jsx)(e7.Textarea,{rows:8,defaultValue:i.helpfulFeedback||"",onChange:e=>s({helpfulFeedback:e.target.value})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"text-sm",children:n("What could be better?")}),(0,t.jsx)(e7.Textarea,{rows:8,defaultValue:i.notHelpfulFeedback||"",onChange:e=>s({notHelpfulFeedback:e.target.value})})]}),(0,t.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,t.jsx)(e1.Button,{variant:"outline",size:"sm",className:"flex-1/2 grow border-zinc-800/20",children:"Cancel"}),(0,t.jsx)(e1.Button,{onClick:l,size:"sm",className:"bg-aubergine-600 flex-1/2 grow cursor-pointer border-none text-white",children:"Submit feedback"})]})]})})},td=()=>{var e,l;let{t:a}=(0,m.useT)(),{user:s}=(0,eJ.useUser)(),{report:n}=(0,u.useHealthReport)(),[r,o]=(0,i.useState)((0,e9.getUuid)()),d=(null==s?void 0:s.uid)&&(null==n?void 0:n.uid)?(0,B.docObs)("userFeedback",r):(0,H.of)(),c=(0,M.useObs)(d,[r]),x=null==c||null==(e=c.feedback)?void 0:e.isHappy,p=e=>{if(!(null==s?void 0:s.uid))return;let t={feedback:e,source:te.ActionPage,userKey:s.uid,reportKey:(null==n?void 0:n.uid)||null};(null==c?void 0:c.createdAt)?(0,tt.setDoc)("userFeedback",c.uid,t):(0,tt.createDoc)("userFeedback",t,{id:r})},h=!(0,tn.default)(null==c||null==(l=c.feedback)?void 0:l.isHappy);return(null==s?void 0:s.uid)?(0,t.jsx)(er.ReportEntryCard,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("div",{className:"text-base",children:a("Is your plan helpful so far?")}),(0,t.jsx)("div",{className:"text-sm md:text-xs",children:a("Give us your feedback")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(tr,{IconComponent:ts,selected:!0===x,onClick:()=>{p({isHappy:!0})}}),(0,t.jsx)(tr,{onClick:()=>{p({isHappy:!1})},IconComponent:ta,selected:!1===x})]}),h&&(0,t.jsx)(to,{closeModal:()=>{o((0,e9.getUuid)())},isHappy:!0===x,updateFeedback:p,feedback:c.feedback||{}})]})}):null};var tc=e.i(993395);let tu=e=>{let{children:l,className:a,email:s="get@aheadhealth.com"}=e;return(0,t.jsx)("a",{href:"mailto:".concat(s),className:a,children:l})},tx=e=>{let{t:l}=(0,m.useT)(),{log:s}=(0,x.useA)("action_plan"),n=(0,a.cn)("bg-aubergine-600 flex-1/2 border-none text-white hover:bg-aubergine-800 flex items-center gap-2 hover:text-white");return(0,i.useMemo)(()=>e.referralRequired?(0,t.jsx)(P.DownloadBundleButton,{mode:tc.DownloadReportMode.doctor,label:l("Referral bundle"),onSuccess:()=>{},onClickBefore:()=>{s("referral_bundle_clicked",{actionKey:e.uid})},className:n,size:"sm"}):e.followupInternalBooking?(0,t.jsx)(e1.Button,{size:"sm",className:n,asChild:!0,children:(0,t.jsx)(tu,{email:"booking@aheadhealth.com",children:l("Book test")})}):null,[e.referralRequired,e.followupInternalBooking,l,n,s,e.uid])};var tm=e.i(111369),tp=e.i(211722),th=e.i(109881),tg=e.i(370585),tf=e.i(897284),tv=e.i(521416),tj=e.i(435684);function tb(e,t){let l=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return l<0?-1:l>0?1:l}function tw(e,t,l){let a=function(e,t){let l=(0,tj.toDate)(e),a=(0,tj.toDate)(t),s=tb(l,a),i=Math.abs((0,tv.differenceInCalendarDays)(l,a));l.setDate(l.getDate()-s*i);let n=Number(tb(l,a)===-s),r=s*(i-n);return 0===r?0:r}(e,t)/7;return(0,tf.getRoundingMethod)(null==l?void 0:l.roundingMethod)(a)}var tN=e.i(503116),ty=e.i(620278);let tC=e=>{let{label:l,IconComponent:s,className:i}=e;return(0,t.jsxs)(E.Badge,{variant:"action",className:(0,a.cn)("relative gap-1 py-1 pr-[6px] pl-[6px] text-xs",i),children:[s&&(0,t.jsx)(s,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"leading-none",children:l})]})},tk=e=>{let{type:l}=e;return(0,t.jsx)(tC,{label:l.title,IconComponent:ty.Target})},tR=e=>{let{frequency:l}=e;return(0,t.jsx)(tC,{label:l,IconComponent:tN.Clock})},tD=e=>{let{dueDate:l}=e,{t:s}=(0,m.useT)(),i=new Date,n=(0,tg.differenceInMonths)(l.toDate(),i),r=tw(l.toDate(),i,{roundingMethod:"trunc"}),{effectiveReportDate:o}=(0,u.useHealthReport)(),d=Math.max(tw(l.toDate(),o),0),c=tw(i,o),x=Math.max(0,Math.min(100,100*(d>0?c/d:100)));if(r>2){let e=n>=1,l=s(e?n>1?"months":"month":r>1?"weeks":"week"),a=e?s("Due in {{distanceInMonths}} {{pluralString}}",{distanceInMonths:n,pluralString:l}):s("Due in {{distanceInWeeks}} {{pluralString}}",{distanceInWeeks:r,pluralString:l});return(0,t.jsx)(tC,{label:a,IconComponent:e=>{let{className:l}=e;return(0,t.jsx)(el,{className:l,value:x})}})}let p=Math.abs(r),h=s("Due now"),g="";if(p>2){g=(0,a.cn)("text-rust-700 bg-rust-100 border-none");let e=s(p>1?"weeks":"week");h=s("Overdue by {{weeks}} {{plural}}",{weeks:p,plural:e})}return(0,t.jsx)(tC,{label:h,className:(0,a.cn)("font-bold",g)})},tS=e=>{let{action:l}=e,a=(0,em.filterBool)([l.dueDateTimestamp&&(0,t.jsx)(tD,{dueDate:l.dueDateTimestamp},l.dueDateTimestamp.toDate().toISOString()),l.type&&(0,t.jsx)(tk,{type:l.type},l.type.toString()),l.frequency&&(0,t.jsx)(tR,{frequency:l.frequency},l.frequency)]);return a.length?(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:a}):null},tP=(0,a.cn)("aspect-video w-full rounded-[28px] object-cover shadow-elevated-soft"),tT=e=>{var l;let{action:a}=e;(0,eL.useLogEventOnMount)("action_plan","details_viewed",{actionKey:a.uid});let{getDataPointById:s}=(0,u.useHealthReport)(),{t:n}=(0,m.useT)(),r=null==(l=a.bannerImage)?void 0:l.url,o=(0,i.useMemo)(()=>(a.triggeringDataPointKeys||[]).map(e=>s(e)).filter(e=>!!e),[a.triggeringDataPointKeys,s]),d=tx(a);return(0,t.jsx)("div",{className:"flex w-full grow flex-col gap-4",onClick:e=>{e.stopPropagation(),console.log("action",a)},children:(0,t.jsxs)("div",{className:"relative mx-auto flex w-full max-w-[668px] flex-col gap-8",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-3",children:[(0,t.jsx)("div",{className:"flex w-full items-start justify-between gap-3",children:(0,t.jsx)("div",{className:"pr-2 text-xl md:text-2xl",children:a.title})}),(0,t.jsx)("div",{className:"text-xs md:text-sm",children:a.subHeader}),(0,t.jsx)(tS,{action:a})]})}),r?(0,t.jsx)("img",{src:r,alt:a.title,className:tP}):null,a.description?(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-base",children:n("Getting started")}),(0,t.jsx)("div",{className:"text-sm whitespace-pre-line",children:a.description})]}):null,a.expectedBenefit?(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-base",children:n("Expected benefits")}),(0,t.jsx)("div",{className:"text-sm whitespace-pre-line",children:a.expectedBenefit})]}):null,(a.description||o.length>0)&&(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"text-base",children:n("Why we recommend this")}),(0,t.jsx)("div",{className:"text-sm",children:n("We personalize your recommendations by combining your test results with your individual health profile.")}),o.length>0?(0,t.jsx)(th.DataPointsDisplay,{dataPoints:o}):null]}),a.nextSteps?(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-base",children:n("Next Steps")}),(0,t.jsx)("div",{className:"text-sm whitespace-pre-line",children:a.nextSteps})]}):null,d&&(0,t.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,t.jsx)(e1.Button,{variant:"outline",size:"sm",className:"flex-1/2 border-zinc-800/20",asChild:!0,children:(0,t.jsx)(tu,{children:n("Talk to our team")})}),d]})]})})},tB=(0,tl.default)("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);var tM=e.i(918789);let tH=e=>{let{content:l}=e;return(0,t.jsx)(tM.default,{components:{p:e=>{let{children:l}=e;return(0,t.jsx)("div",{className:"mt-2 text-xs md:text-sm",children:l})},h1:e=>{let{children:l}=e;return(0,t.jsx)("div",{className:"my-2 md:text-lg",children:l})},h2:e=>{let{children:l}=e;return(0,t.jsx)("div",{className:"my-1.5 text-sm md:text-base",children:l})},ul:e=>{let{children:l}=e;return(0,t.jsx)("div",{className:"mt-2 flex list-disc flex-col gap-2 text-xs md:text-sm",children:l})},ol:e=>{let{children:l}=e;return(0,t.jsx)("div",{className:"mt-2 flex flex-col gap-2 text-xs md:text-sm",children:l})},li:e=>{let{children:l}=e;return(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("div",{className:"mt-0.5",children:(0,t.jsx)(tB,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"text-xs md:text-sm",children:l})]})}},children:l})},tA=()=>{var e;let{referralGuide:l}=(0,u.useHealthReport)();return l?(0,t.jsxs)("div",{className:"flex grow flex-col",children:[(0,t.jsx)("div",{className:"mb-1.5 text-xl font-normal md:text-2xl",children:l.title}),(0,t.jsx)("div",{className:"mb-4 text-xs md:text-sm",children:l.subHeader}),(0,t.jsx)("img",{src:null==(e=l.bannerImage)?void 0:e.url,alt:l.title,className:(0,a.cn)(tP,"mb-7")}),(0,t.jsx)(tH,{content:l.content||""})]}):null},tI=e=>{let{actionKey:l}=e,{t:a}=(0,m.useT)(),{referralGuide:s}=(0,u.useHealthReport)(),{openReferralGuide:i}=ef(),{log:n}=(0,x.useA)("action_plan");return s?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("span",{className:"cursor-pointer underline",onClick:()=>{n("referral_guide_opened",{actionKey:l}),i()},children:a("Read more")})}):null},t_=e=>{let{className:l}=e;return(0,t.jsx)(O.default,{src:tp.default,alt:"Info",className:(0,a.cn)("text-aubergine-100 h-4 w-4",l)})},tO=e=>{var l,s;let{action:n}=e,{allDataPoints:r}=(0,u.useHealthReport)(),{openDetailsForActionKey:o}=ef(),{t:d}=(0,m.useT)(),{log:c}=(0,x.useA)("action_plan"),p=null==(l=n.bannerImage)?void 0:l.url,h=n.referralRequired,f=(0,i.useMemo)(()=>{let e=n.triggeringDataPointKeys||[];if(!r||0===e.length)return[];let t=new Set(e);return r.filter(e=>t.has(e.uid||""))},[r,n.triggeringDataPointKeys]),v=tx(n);return(0,t.jsx)(er.ReportEntryCard,{children:(0,t.jsxs)("article",{className:"flex flex-col gap-4","aria-label":n.title,onClick:e=>{e.metaKey&&console.log("action",n)},children:[(0,t.jsxs)("button",{className:"flex cursor-pointer items-center gap-3 text-left",onClick:()=>{o(n.uid),c("card_clicked",{actionKey:n.uid})},"aria-label":"".concat(n.title).concat(n.subHeader?", ".concat(n.subHeader):"",". ").concat(d("Click for details")),children:[p?(0,t.jsx)("img",{src:p,alt:"",className:"h-16 w-16 rounded-2xl object-cover shadow","aria-hidden":"true"}):null,(0,t.jsxs)("div",{className:"flex grow items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex min-w-0 flex-col gap-1",children:[(0,t.jsx)("span",{className:(0,a.cn)({"opacity-50":!(null==(s=n.review)?void 0:s.approved)}),children:n.title}),(0,t.jsx)("span",{className:"text-xs md:text-sm",children:n.subHeader})]}),(0,t.jsx)("div",{className:"shrink-0","aria-hidden":"true",children:(0,t.jsx)(N.ChevronRight,{className:"size-4"})})]})]}),(0,t.jsx)(tS,{action:n}),(f.length>0||h)&&(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[f.length>0&&(0,t.jsx)("div",{className:"flex w-full flex-col gap-2 rounded-xl bg-zinc-100",children:(0,t.jsxs)(tm.Collapsible,{onOpenChange:e=>{e&&c("biomarker_list_expanded",{actionKey:n.uid,count:f.length})},children:[(0,t.jsx)(tm.CollapsibleTrigger,{className:"w-full cursor-pointer px-4 pt-2.5 pb-3","aria-label":d("{{relevantDataPointsCount}} relevant biomarkers. Click to expand",{relevantDataPointsCount:f.length}),children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs leading-none md:text-sm",children:d("{{relevantDataPointsCount}} relevant biomarkers",{relevantDataPointsCount:f.length})}),(0,t.jsx)(g.ChevronDown,{className:"h-3 w-3","aria-hidden":"true"})]})}),(0,t.jsx)(tm.CollapsibleContent,{className:"p-4",children:(0,t.jsx)(th.DataPointsDisplay,{dataPoints:f})})]})}),h&&(0,t.jsxs)("div",{className:"bg-aubergine-100 flex w-full items-start gap-1.5 rounded-2xl px-4 pt-2.5 pb-3",role:"alert","aria-label":d("Referral required"),children:[(0,t.jsx)(t_,{}),(0,t.jsxs)("div",{className:"text-xs leading-none md:text-sm",children:[d("This test requires a referral from your GP or Ahead's medical team.")," ",(0,t.jsx)(tI,{actionKey:n.uid})]})]})]}),v&&(0,t.jsxs)("div",{className:"flex w-full items-center gap-2",role:"group","aria-label":d("Actions"),children:[(0,t.jsx)(e1.Button,{variant:"outline",size:"sm",className:"flex-1/2 grow border-zinc-800/20",onClick:()=>{o(n.uid),c("card_clicked",{actionKey:n.uid})},children:d("View details")}),v]})]})})};var tK=e.i(668957),tE=e.i(39751);let tz=e=>{let{children:l,title:a}=e;return(0,t.jsxs)("section",{className:"flex flex-col gap-3","aria-label":a,children:[(0,t.jsx)("div",{role:"heading","aria-level":2,children:a}),(0,t.jsx)("ul",{className:"flex flex-col gap-6",role:"list","aria-label":a,children:l})]})},tF=()=>{let{optimisationsForCurrentReport:e,followupsForCurrentReport:l,actionSummary:a}=(0,u.useHealthReport)(),[s,i]=(0,tK.default)(l,e=>{var t,l;return null!=(t=e.dueDateTimestamp)&&!!t.toDate()&&1>(0,tg.differenceInMonths)(null==(l=e.dueDateTimestamp)?void 0:l.toDate(),new Date)}),{t:n}=(0,m.useT)();return(0,t.jsx)("div",{className:"flex min-h-0 w-full shrink-0 grow flex-col items-center",role:"region","aria-label":n("Action plan"),children:(0,t.jsxs)("div",{className:"report-content-container flex min-h-0 flex-col gap-10",children:[a&&(0,t.jsx)("section",{className:"flex w-full flex-col gap-4 md:flex-row","aria-label":n("Summary"),children:(0,t.jsx)(e6.HealthNoteDisplay,{note:a,className:"bg-aubergine-600 text-white",showActions:!1})}),s.length>0&&(0,t.jsx)(tz,{title:n("Upcoming"),children:s.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(tO,{action:e})},e.uid))}),(0,t.jsx)(tz,{title:n("Actions"),children:(0,tE.sortHealthActions)(e).map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(tO,{action:e})},e.uid))}),i.length>0&&(0,t.jsx)(tz,{title:n("Follow-ups"),children:i.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(tO,{action:e})},e.uid))}),(0,t.jsx)(td,{})]})})};var tU=e.i(37727);let tL=()=>{let{preparationInstructions:e,booking:l}=(0,u.useHealthReport)(),{t:s}=(0,m.useT)(),n=(0,i.useMemo)(()=>{if(!l||!e)return[];let t=[l.packageProductKey,...l.addOnProductKeys||[]];return e.filter(e=>{var l;return!!e.alwaysShow||(null==(l=e.appliesToProducts)?void 0:l.some(e=>t.includes(e)))}).sort((e,t)=>void 0!==e.index&&void 0!==t.index?e.index-t.index:void 0!==e.index?-1:void 0!==t.index?1:(e.title||"").localeCompare(t.title||""))},[l,e]);return(0,t.jsxs)("div",{className:"flex grow flex-col",children:[(0,t.jsx)("div",{className:"mb-1.5 text-xl font-normal md:text-2xl",children:s("Preparation Instructions")}),(0,t.jsx)("div",{className:"mb-4 text-xs md:text-sm",children:s("Review guidelines before your check-up")}),(0,t.jsx)(O.default,{src:"/images/prep_instructions_header.png",alt:s("Preparation Instructions"),className:(0,a.cn)(tP,"mb-7 object-top"),width:1e3,height:1e3}),0===n.length?(0,t.jsx)("div",{className:"text-xs md:text-sm",children:s("No preparation instructions available at this time.")}):(0,t.jsx)("div",{className:"flex flex-col gap-4",children:n.map(e=>(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("div",{className:"text-base md:text-lg",children:e.title}),(0,t.jsx)(tH,{content:e.content||""})]},e.uid))})]})},tV=()=>{let{openForActionKey:e,mode:l,closeSidePanel:s}=ef(),{getFollowupById:n,getOptimisationById:r}=(0,u.useHealthReport)(),o=(0,i.useRef)(null),[d,c]=(0,i.useState)(e);(0,i.useEffect)(()=>{e&&c(e)},[e]);let x=e||d||"",m=x&&n(x),p=x&&r(x),h=m||p,g=h&&e||l===eh.REFERRAL_GUIDE||l===eh.PREPARATION_INSTRUCTIONS;return(0,t.jsx)("div",{className:(0,a.cn)("pointer-events-none absolute top-0 left-0 z-30 h-full w-full transition-all duration-300",g?"pointer-events-auto bg-zinc-800/40 backdrop-blur-sm":"bg-transparent"),onClick:e=>{var t;null!=(t=o.current)&&t.contains(e.target)||(s(),e.stopPropagation())},children:(0,t.jsxs)("div",{ref:o,className:(0,a.cn)("absolute top-0 right-0 z-40 flex h-full min-h-0 w-full flex-col overflow-y-auto bg-white transition-transform duration-300 md:w-[700px]",g?"translate-x-0":"translate-x-full"),onTransitionEnd:()=>{e||c(null)},children:[(0,t.jsx)("div",{className:"absolute top-3 right-3 z-50",children:(0,t.jsx)("button",{className:"bg-background flex h-6 w-6 shrink-0 cursor-pointer items-center justify-center rounded-full border-none",onClick:()=>{s()},children:(0,t.jsx)(tU.X,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"flex min-h-0 shrink-0 grow flex-col bg-white px-4 py-6 md:p-10",children:[h&&l!==eh.REFERRAL_GUIDE&&l!==eh.PREPARATION_INSTRUCTIONS&&(0,t.jsx)(tT,{action:h}),l===eh.REFERRAL_GUIDE&&(0,t.jsx)(tA,{}),l===eh.PREPARATION_INSTRUCTIONS&&(0,t.jsx)(tL,{})]})]})})},tq=e=>{let{className:l}=e;return(0,t.jsxs)("svg",{className:l,viewBox:"0 0 16 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("line",{x1:"0.75",y1:"7.25",x2:"15.25",y2:"7.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"0.75",y1:"1.25",x2:"15.25",y2:"1.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})},tW=e=>{let{className:l}=e;return(0,t.jsxs)("svg",{className:l,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsxs)("g",{clipPath:"url(#clip0_1518_41063)",children:[(0,t.jsx)("path",{d:"M31.3563 42.3339C34.7078 42.3339 37.8054 41.3894 40.2835 39.7847C42.203 38.5559 44.7014 38.759 46.3873 40.2925C51.0693 44.5378 53.7302 50.5603 53.72 56.8876V59.5993C53.72 62.4023 51.4451 64.6672 48.642 64.6672H14.0707C11.2676 64.6672 8.99262 62.4023 8.99262 59.5993V56.8876C8.9723 50.5705 11.6332 44.5378 16.3152 40.3027C18.0011 38.7691 20.5096 38.566 22.419 39.7949C24.9072 41.3894 27.9947 42.3339 31.3563 42.3339Z",fill:"url(#paint1_linear_1518_41063)",fillOpacity:"0.2"}),(0,t.jsx)("path",{d:"M31.3563 42.3339C34.7078 42.3339 37.8054 41.3894 40.2835 39.7847C42.203 38.5559 44.7014 38.759 46.3873 40.2925C51.0693 44.5378 53.7302 50.5603 53.72 56.8876V59.5993C53.72 62.4023 51.4451 64.6672 48.642 64.6672H14.0707C11.2676 64.6672 8.99262 62.4023 8.99262 59.5993V56.8876C8.9723 50.5705 11.6332 44.5378 16.3152 40.3027C18.0011 38.7691 20.5096 38.566 22.419 39.7949C24.9072 41.3894 27.9947 42.3339 31.3563 42.3339Z",fill:"#182D56"}),(0,t.jsx)("path",{d:"M31.3562 37.813C38.3002 37.813 43.9294 32.1837 43.9294 25.2397C43.9294 18.2957 38.3002 12.6665 31.3562 12.6665C24.4122 12.6665 18.7829 18.2957 18.7829 25.2397C18.7829 32.1837 24.4122 37.813 31.3562 37.813Z",fill:"url(#paint2_linear_1518_41063)",fillOpacity:"0.2"}),(0,t.jsx)("path",{d:"M31.3562 37.813C38.3002 37.813 43.9294 32.1837 43.9294 25.2397C43.9294 18.2957 38.3002 12.6665 31.3562 12.6665C24.4122 12.6665 18.7829 18.2957 18.7829 25.2397C18.7829 32.1837 24.4122 37.813 31.3562 37.813Z",fill:"#182D56"})]}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"paint0_linear_1518_41063",x1:"-9.6",y1:"-75.2",x2:"45.6",y2:"32",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#93B6EE"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#5182D0"})]}),(0,t.jsxs)("linearGradient",{id:"paint1_linear_1518_41063",x1:"2.28337",y1:"8.80977",x2:"17.0803",y2:"58.8573",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#93B6EE"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#5182D0"})]}),(0,t.jsxs)("linearGradient",{id:"paint2_linear_1518_41063",x1:"15.011",y1:"-16.8806",x2:"36.6998",y2:"25.2397",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#93B6EE"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#5182D0"})]}),(0,t.jsx)("clipPath",{id:"clip0_1518_41063",children:(0,t.jsx)("rect",{width:"64",height:"64",rx:"32",fill:"white"})})]})]})};var tZ=e.i(647137),tG=e.i(630283),tY=e.i(63270);function tX(e){let{currentLanguage:l,languages:s,onLanguageChange:n,className:r}=e,[o,d]=(0,i.useState)(l);return(0,t.jsx)("div",{className:(0,a.cn)("inline-flex items-center rounded-[40px] bg-gray-100 p-1",r),children:s.map(e=>(0,t.jsx)("button",{onClick:()=>{d(e),null==n||n(e)},className:(0,a.cn)("rounded-[40px] px-2 py-1 text-xs font-medium uppercase transition-all duration-200","hover:bg-white/50",o===e?"bg-white text-gray-900 shadow-xs":"text-gray-600 hover:text-gray-900"),children:e.split("-")[0]},e))})}let tJ=()=>{var e,l,s,n;let[r,p]=(0,i.useState)(!1),[h,g]=(0,i.useState)(!1),{userProfile:f,user:v,isReadAdmin:j,isInternal:b,isUpgradedTo:w}=(0,eJ.useUser)(),{t:y}=(0,m.useT)(),{log:C}=(0,x.useA)("report"),{allDataPoints:k,allOptimisations:D,userReports:S}=(0,u.useHealthReport)(),P=null!=(s=null==S?void 0:S.length)?s:0,T=(0,i.useMemo)(()=>{let e=new Set;return k.forEach(t=>{var l;(null==(l=t.info)?void 0:l.uid)&&e.add(t.info.aheadId)}),e.size},[k]),B=null!=(n=null==D?void 0:D.length)?n:0,M=async e=>{(null==v?void 0:v.uid)&&await (0,tt.setDoc)("userProfile",v.uid,{interfaceLanguage:e})},H=(null==f?void 0:f.name)?"".concat(f.name.first||""," ").concat(f.name.last||"").trim()||f.name.displayName||(null==v?void 0:v.displayName)||y("User"):(null==v?void 0:v.displayName)||y("User"),A=null==f||null==(e=f.profilePicture)?void 0:e.url,I=(null==v||null==(l=v.metadata)?void 0:l.creationTime)?new Date(v.metadata.creationTime).getFullYear():new Date().getFullYear(),_=[{label:y("Contact us"),onClick:()=>{window.open("https://aheadhealth.com/contact","_blank")}}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o,{open:r,onOpenChange:e=>{e&&C("account_menu_opened",null),p(e)},children:[(0,t.jsx)(d,{asChild:!0,children:(0,t.jsxs)("button",{className:(0,a.cn)("hover:bg-light shadow-soft flex h-[38px] items-center gap-2 rounded-full bg-white py-2 pr-1 pl-3 transition-colors focus:outline-none",r&&"relative z-50"),"aria-label":y("My account"),"aria-expanded":r,"aria-haspopup":"dialog",children:[(0,t.jsx)(tq,{className:"h-4 w-4 md:hidden","aria-hidden":"true"}),(0,t.jsx)("span",{className:"hidden text-sm md:inline",children:y("My account")}),(0,t.jsxs)(tY.Avatar,{className:"h-7 w-7 overflow-hidden",children:[(0,t.jsx)(tY.AvatarImage,{src:A,alt:H}),(0,t.jsx)(tY.AvatarFallback,{className:"bg-primary/50",children:(0,t.jsx)(tW,{className:"h-7 w-7"})})]})]})}),(0,t.jsxs)(c,{align:"end",className:"shadow-soft w-[calc(100vw-32px)] rounded-[20px] bg-white px-2 py-5 md:w-[280px]","aria-label":"Account menu",children:[(0,t.jsx)("div",{className:"absolute top-3 right-3",children:(0,t.jsx)(tX,{currentLanguage:(null==f?void 0:f.interfaceLanguage)||"en",languages:["en","de"],onLanguageChange:M})}),(0,t.jsxs)("section",{"aria-label":"Profile information",className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(tY.Avatar,{className:"h-16 w-16",children:[(0,t.jsx)(tY.AvatarImage,{src:A,alt:H}),(0,t.jsx)(tY.AvatarFallback,{className:"bg-primary/50",children:(0,t.jsx)(tW,{className:"h-8 w-8"})})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1.5 text-center",children:[(0,t.jsx)("div",{className:"text-[15px]",children:H}),(0,t.jsxs)("div",{className:"text-xs",children:[y("Joined in")," ",I]})]})]}),w.length>0&&(0,t.jsx)("div",{className:"mx-2 mt-4",children:(0,t.jsx)(tG.UpgradedRolesDisplay,{})}),(0,t.jsxs)("section",{"aria-label":"Account statistics",className:"bg-background mt-4 grid grid-cols-3 gap-2 rounded-2xl px-2 py-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("img",{src:"/icons/stethoscope.svg",alt:"",className:"h-6 w-6","aria-hidden":"true"}),(0,t.jsxs)("div",{className:"text-center text-[11px] leading-tight",children:[P," ",y("Check-ups"),(0,t.jsx)("br",{}),y("done")]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("img",{src:"/icons/test-tube.svg",alt:"",className:"h-6 w-6","aria-hidden":"true"}),(0,t.jsxs)("div",{className:"text-center text-[11px] leading-tight",children:[T," ",y("biomarkers"),(0,t.jsx)("br",{}),y("tracked")]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("img",{src:"/icons/iphone.svg",alt:"",className:"h-6 w-6","aria-hidden":"true"}),(0,t.jsxs)("div",{className:"text-center text-[11px] leading-tight",children:[B," ",y("health"),(0,t.jsx)("br",{}),y("actions")]})]})]}),(0,t.jsxs)("nav",{"aria-label":"Account actions",className:"mt-4 flex flex-col gap-4 px-2",children:[(j||b)&&(0,t.jsxs)("button",{onClick:()=>{g(!0),p(!1)},className:"hover:text-muted-foreground flex items-center justify-between text-left text-sm transition-colors",children:[(0,t.jsx)("span",{children:y("View admin menu")}),(0,t.jsx)(N.ChevronRight,{className:"text-muted-foreground h-4 w-4","aria-hidden":"true"})]}),_.map(e=>(0,t.jsxs)("button",{onClick:e.onClick,className:"hover:text-muted-foreground flex items-center justify-between text-left text-sm transition-colors",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)(N.ChevronRight,{className:"text-muted-foreground h-4 w-4","aria-hidden":"true"})]},e.label)),(0,t.jsxs)("button",{onClick:()=>{(0,e0.signOut)((0,e0.getAuth)((0,e$.init)().app)),p(!1)},className:"hover:text-muted-foreground flex items-center justify-between text-left text-sm transition-colors",children:[(0,t.jsx)("span",{children:y("Logout")}),(0,t.jsx)(N.ChevronRight,{className:"text-muted-foreground h-4 w-4","aria-hidden":"true"})]})]})]})]}),(0,t.jsx)(R.Dialog,{open:h,onOpenChange:g,children:(0,t.jsxs)(R.DialogContent,{className:"max-h-[80vh] overflow-y-auto",children:[(0,t.jsx)(R.DialogHeader,{children:(0,t.jsx)(R.DialogTitle,{children:y("Admin Menu")})}),(0,t.jsx)("nav",{"aria-label":"Admin actions",className:"space-y-2",children:(0,t.jsx)(tZ.AdminMenuContent,{onItemClick:()=>g(!1)})})]})})]})};function tQ(e){let{children:l,className:s,stickyClassName:n="",...r}=e,o=i.useRef(null),[d,c]=i.useState(!1);return i.useEffect(()=>{var e;let t=o.current;if(!t)return;let l=document.createElement("div");null==(e=t.parentElement)||e.insertBefore(l,t);let a=new IntersectionObserver(e=>{let[t]=e;c(!t.isIntersecting)},{threshold:[1]});return a.observe(l),()=>{a.disconnect(),l.remove()}},[]),(0,t.jsx)("div",{ref:o,className:(0,a.cn)(s,d&&n),...r,children:l})}let t$=()=>(0,t.jsx)(tQ,{className:"report-header-mobile group sticky top-0 z-10 flex flex-col gap-10 bg-transparent px-4 pt-3 pb-5 md:hidden",stickyClassName:"is-sticky",children:(0,t.jsxs)("header",{className:"flex w-full min-w-0 gap-3 transition-[filter] group-[.is-sticky]:drop-shadow-[0_4px_20px_rgba(0,0,0,0.3)]","aria-label":"Mobile navigation header",children:[(0,t.jsx)("div",{className:"grow",role:"presentation",children:(0,t.jsx)(K,{})}),(0,t.jsx)(tJ,{})]})}),t0=e=>{let{className:l}=e;return(0,t.jsx)("div",{className:(0,a.cn)("text-accent-foreground flex h-[18px] w-[18px] items-center justify-center rounded-full text-sm leading-none",l),children:(0,t.jsx)("div",{children:"i"})})},t1=()=>{let{report:e}=(0,u.useHealthReport)(),{log:l}=(0,x.useA)("report"),s=(0,b.useRouter)(),n=I(),{label:r,date:p}=(()=>{var e,t,l;let{t:a}=(0,m.useT)(),{report:s,userReports:n,products:r}=(0,u.useHealthReport)(),o=n.find(e=>e.uid===s.uid),d=(0,i.useMemo)(()=>(null==o?void 0:o.fromBookingKey)?(0,B.docObs)("booking",o.fromBookingKey):(0,H.of)(null),[null==o?void 0:o.fromBookingKey]),c=(0,M.useObs)(d,[null==o?void 0:o.fromBookingKey]),x=r.find(e=>e.uid===(null==c?void 0:c.packageProductKey)),p=(null==c||null==(e=c.addOnProductKeys)?void 0:e.map(e=>r.find(t=>t.uid===e)).filter(Boolean))||[],h=(null==o||null==(t=o.dataCollectionDate)?void 0:t.toDate())||(null==o||null==(l=o.createdAt)?void 0:l.toDate()),g=h?(0,S.format)(h,"MMMM do, yyyy"):null;return{label:(()=>{let e=(null==x?void 0:x.name)||"",t=p.length,l=t>0?" + ".concat(t," ").concat(a("add-on",{count:t})):"";return"".concat(e).concat(l)})(),date:g}})(),[v,w]=(0,i.useState)(!1),[N,y]=(0,i.useState)(!1),[C,k]=(0,i.useState)(!1),{t:R}=(0,m.useT)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("section",{className:"flex items-center justify-between md:hidden","aria-label":"Report selector",children:[(0,t.jsxs)(o,{open:C,onOpenChange:k,children:[(0,t.jsxs)("div",{className:"flex grow flex-col gap-0.5",children:[(0,t.jsx)(d,{asChild:!0,children:(0,t.jsxs)("button",{className:(0,a.cn)("flex items-center gap-1",C&&"relative z-50"),"aria-expanded":C,"aria-haspopup":"listbox","aria-label":R("Select report"),children:[(0,t.jsx)(G,{}),C?(0,t.jsx)(f.ChevronUp,{className:"h-5 w-5","aria-hidden":"true"}):(0,t.jsx)(g.ChevronDown,{className:"h-5 w-5","aria-hidden":"true"})]})}),(r||p)&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs","aria-label":"".concat(r).concat(p?", ".concat(p):""),children:[r&&(0,t.jsx)("span",{children:r}),r&&p&&(0,t.jsx)("div",{className:"h-3 w-px bg-gray-300","aria-hidden":"true"}),p&&(0,t.jsx)("span",{children:p})]})]}),(0,t.jsx)(c,{align:"start",sideOffset:8,className:"shadow-soft w-[calc(100vw-32px)] rounded-2xl border-0 bg-white px-2 py-2","aria-label":"Available reports",children:(0,t.jsx)("ul",{className:"flex flex-col",role:"listbox","aria-label":"Select a report",children:n.map(i=>(0,t.jsx)("li",{role:"option","aria-selected":i.uid===e.uid,children:(0,t.jsxs)("button",{onClick:()=>(e=>{l("report_selected",{reportKey:e}),k(!1),s.push("/report/".concat(e))})(i.uid),className:(0,a.cn)("flex w-full cursor-pointer items-center justify-between rounded-2xl py-3 pr-4 pl-2 text-left",i.uid===e.uid&&"bg-selected"),children:[(0,t.jsx)(A,{reportId:i.uid}),i.uid===e.uid&&(0,t.jsx)(h.Check,{className:"h-4 w-4 shrink-0","aria-hidden":"true"})]})},i.uid))})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",role:"group","aria-label":"Report actions",children:[(0,t.jsx)(e1.Button,{variant:"white",size:"icon",className:"h-7 w-7 rounded-full",onClick:()=>w(!0),"aria-label":R("View details"),children:(0,t.jsx)(t0,{className:"h-5 w-5","aria-hidden":"true"})}),(0,t.jsx)(e1.Button,{variant:"white",size:"icon",className:"h-7 w-7 rounded-full",onClick:()=>y(!0),"aria-label":R("Share report"),children:(0,t.jsx)(j.Share2,{className:"h-5 w-5","aria-hidden":"true"})})]})]}),(0,t.jsx)(P.ShareExportDialog,{isOpen:N,onClose:()=>y(!1)}),(0,t.jsx)(T,{isOpen:v,onClose:()=>w(!1)})]})},t2=e=>{let{children:l}=e;return(0,t.jsx)("div",{className:"flex h-full w-full flex-col items-center gap-4 py-8",children:(0,t.jsx)("div",{className:"report-content-container flex flex-col justify-stretch gap-4",children:l})})},t3=()=>(0,t.jsx)(t2,{children:(0,t.jsx)(eE,{})}),t5=()=>(0,t.jsx)(t2,{children:(0,t.jsx)(ex,{})}),t8=()=>{let{view:e,setView:s}=(0,l.useHealthReportParamView)(),{getScrollContainerProps:n}=(0,i.useContext)(ee.SectionContext),{report:r,loadingReport:o,unauthorized:d,dataPointsForThisReport:c,actionSummary:x,booking:m}=(0,u.useHealthReport)(),p=(0,e4.isServerside)()?"":window.location.hash,[h,g]=(0,i.useState)(!p);(0,i.useEffect)(()=>{p||g(!0)},[p]);let{isReadAdmin:f,user:v}=(0,eJ.useUser)(),{isPdfRender:j}=(0,i.useContext)(e8.IsPdfRenderContext),w=(e=>{let{isPdfRender:t,ariaLabel:l,readyToShow:a,mergeRef:s}=e,n=(0,i.useRef)(null),r=(0,i.useCallback)(e=>{n.current=e,s&&s(e),e&&!t&&a&&requestAnimationFrame(()=>{e.focus({preventScroll:!0})})},[s,t,a]);(0,i.useEffect)(()=>{!t&&a&&n.current&&requestAnimationFrame(()=>{n.current&&n.current.focus({preventScroll:!0})})},[t,a]);let o=(0,i.useCallback)(e=>{if(t||!n.current)return;let l=n.current,a=l.clientHeight;switch(e.key){case"PageDown":e.preventDefault(),l.scrollBy({top:.9*a,behavior:"smooth"});break;case"PageUp":e.preventDefault(),l.scrollBy({top:-(.9*a),behavior:"smooth"});break;case"Home":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),l.scrollTo({top:0,behavior:"smooth"}));break;case"End":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),l.scrollTo({top:l.scrollHeight,behavior:"smooth"}));break;case" ":e.shiftKey?(e.preventDefault(),l.scrollBy({top:-(.9*a),behavior:"smooth"})):(e.preventDefault(),l.scrollBy({top:.9*a,behavior:"smooth"}))}},[t]);return{ref:r,tabIndex:t?void 0:0,onKeyDown:o,"aria-label":l,"data-scroll-container":!0,style:{outline:"none"}}})({isPdfRender:j,ariaLabel:"actions"===e?"Action Plan Content":"Health Report Content",readyToShow:h,mergeRef:n().ref}),N=(0,i.useMemo)(()=>{var e;return(null==c||null==(e=c.all)?void 0:e.map(e=>e.uid))||[]},[null==c?void 0:c.all]),y=!o&&r&&v&&!f&&!r.releasedOn,C={actions:x&&(null==r?void 0:r.releasedOn)?(0,t.jsx)(tF,{}):(0,t.jsx)(t5,{}),report:y?(0,t.jsx)(t3,{}):(0,t.jsx)(et.TabbedHealthReportDisplay,{}),home:(0,t.jsx)(eG,{})},k=e?C[e]:null;if((0,i.useEffect)(()=>{!o&&p&&k&&setTimeout(()=>{g(!0)},500)},[o,p,k]),(0,i.useEffect)(()=>{(async()=>{k||o||(!m||(null==r?void 0:r.releasedOn)?s("report"):s("home"))})()},[m,k,s,null==r?void 0:r.releasedOn,o]),d)return(0,t.jsx)(e3,{});!r||(null==r?void 0:r.createdAt)||(0,b.notFound)();let R=o||!h,D={home:"Home",report:"Health Report",actions:"Action Plan"};return(0,t.jsx)(e5.DpExpandedStateProvider,{dataPointIds:N,children:(0,t.jsxs)("article",{className:(0,a.cn)("relative flex min-h-0 w-full grow flex-col"),"aria-label":e?D[e]:"Health Report",children:[(0,t.jsx)(tV,{}),R?(0,t.jsx)(eY.WholeHeightLoading,{}):(0,t.jsxs)("div",{className:"flex min-h-0 flex-1",role:"presentation",children:[!j&&(0,t.jsx)(J,{}),(0,t.jsx)("main",{className:(0,a.cn)("flex h-full w-full grow flex-col md:items-center"),"aria-label":e?"".concat(D[e]," main content"):"Main content",children:(0,t.jsxs)("div",{className:(0,a.cn)("relative flex w-full flex-col overflow-y-auto pb-10",{"overflow-visible":j}),...w,children:[(0,t.jsx)(t$,{}),!j&&(0,t.jsx)("div",{className:"pointer-events-none hidden w-full opacity-0 md:block",children:(0,t.jsx)(X,{})}),!j&&(0,t.jsx)("div",{className:"px-4 md:hidden",role:"presentation",children:"report"===e||"actions"===e?(0,t.jsx)(t1,{}):(0,t.jsx)(G,{})}),!j&&(0,t.jsx)("div",{className:"absolute top-6 right-10 hidden overflow-visible md:block",children:(0,t.jsx)(tJ,{})}),(0,t.jsx)("div",{className:"w-full pb-5 md:hidden","aria-hidden":"true"}),!o&&r&&k]})})]})]})})},t4=e=>{let{reportKey:a,defaultReportData:s}=e,{user:i}=(0,eJ.useUser)();return(0,t.jsx)(x.ProvideAnalyticsForFeature,{featureName:"report",startingContext:{reportKey:a},children:(0,t.jsx)(x.ProvideAnalyticsForFeature,{featureName:"homepage",startingContext:{userKey:(null==i?void 0:i.uid)||""},children:(0,t.jsx)(x.ProvideAnalyticsForFeature,{featureName:"action_plan",startingContext:{reportKey:a},children:(0,t.jsx)($,{children:(0,t.jsx)("div",{className:"flex h-dvh grow flex-col gap-4 overflow-hidden",children:(0,t.jsx)(ee.ProvideSectionContext,{children:(0,t.jsx)(l.HealthReportParamViewProvider,{children:(0,t.jsx)(u.HealthReportProvider,{reportKey:a,defaultRawData:s,children:(0,t.jsx)(ev,{children:(0,t.jsx)(t8,{})})})})})})})})})})},t6=()=>{let{reportKey:e}=(0,b.useParams)();return(0,t.jsx)(t4,{reportKey:e})}}]);

//# sourceMappingURL=7e4f4caf0bae4dfc.js.map
//# debugId=e900bf6c-ce26-5b1c-80ea-9536f17fa901
