
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a5129787-53a6-5bf0-addd-c27ee5b50187")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,579770,e=>{"use strict";e.s(["AccessLogger",()=>a]);var t=e.i(271645),r=e.i(618566),n=e.i(390421),s=e.i(951984);function a(){var e;let a=(0,r.usePathname)(),i=(0,r.useSearchParams)(),o=(0,s.useUser)(),l=(0,t.useRef)({});return(0,t.useEffect)(()=>{var e;if(!o.isWriteAdmin||!(null==(e=o.user)?void 0:e.uid)||l.current[a])return;let t="".concat(a).concat(i.toString()?"?".concat(i.toString()):"");(0,n.createDoc)("accessLog",{userKey:o.user.uid,path:t,claims:o.claims||null}),l.current[t]=!0},[a,i,null==o||null==(e=o.user)?void 0:e.uid,null==o?void 0:o.isWriteAdmin,o.claims]),null}},529107,e=>{"use strict";e.s(["AdminMenuButtonForLoggedInUser",()=>k],529107);var t=e.i(843476),r=e.i(951984),n=e.i(63270),s=e.i(167881),a=e.i(59377),i=e.i(908083),o=e.i(130014),l=e.i(800177),c=e.i(676029),d=e.i(647163);e.i(151718);var u=e.i(506973);let m=(0,e.i(475254).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var p=e.i(284614),v=e.i(37727),x=e.i(271645),h=e.i(647137),f=e.i(717038),g=e.i(995446),y=e.i(427322),w=e.i(120682);function b(){let{toast:e}=(0,w.useToast)(),r=(0,g.useObs)((0,f.docObs)("systemInfo","main"),[]),n=async()=>{e({description:"Triggering Static Data sync...please wait up to 15 seconds"});try{let t=await (0,y.apiPost)("/api/sync-static-data",{});e({variant:t.error?"destructive":"default",description:t.error?"Static Data sync failed: ".concat(t.error):"Static Data sync complete"})}catch(t){console.error(t),e({description:"Static Data sync failed",variant:"destructive"})}},s=(null==r?void 0:r.staticDataLastSyncTimestamp)||(null==r?void 0:r.airtableLastSyncTimestamp),a=s?new Date(s.toMillis()).toLocaleString():"Never";return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("button",{className:"block w-full rounded-md px-3 py-2 text-left text-sm text-gray-900 transition-colors hover:bg-gray-100",onClick:n,children:"Trigger Static Data Sync"}),(0,t.jsxs)("div",{className:"px-3 text-xs text-gray-500",children:["Last sync: ",a]})]})}var j=e.i(630374),N=e.i(618566),T=e.i(174886),C=e.i(531278);function E(e){let{isOpen:r,onClose:n}=e,a=(0,N.useRouter)(),i=(0,N.usePathname)(),o=(0,N.useSearchParams)(),{toast:c}=(0,w.useToast)(),[d,u]=(0,x.useState)(null),[m,p]=(0,x.useState)(null),v=async e=>{u(e);let t=new URLSearchParams(o.toString());t.set("testUserId",e);let r=t.toString();a.push("".concat(i).concat(r?"?".concat(r):"")),window.location.reload(),u(null),n()},h=async e=>{p(e);let t=new URLSearchParams(o.toString());t.set("testUserId",e);let r=t.toString(),n="".concat(window.location.origin).concat(i).concat(r?"?".concat(r):"");await navigator.clipboard.writeText(n),c({title:"Link Copied",description:"Test user link copied to clipboard"}),p(null)};return(0,t.jsx)(j.Dialog,{open:r,onOpenChange:n,children:(0,t.jsxs)(j.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(j.DialogHeader,{children:(0,t.jsx)(j.DialogTitle,{children:"Switch to Test User"})}),(0,t.jsx)("div",{className:"space-y-2",children:l.testUserProfiles.map(e=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(s.Button,{variant:"outline",className:"flex-1 justify-start text-left",onClick:()=>v(e.uid),disabled:d===e.uid||m===e.uid,children:d===e.uid?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.Loader2,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("div",{children:"Loading..."})]}):(0,t.jsxs)("div",{className:"flex flex-col items-start",children:[(0,t.jsxs)("div",{className:"font-medium",children:[e.profile.name.first," ",e.profile.name.last]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.profile.email})]})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>h(e.uid),disabled:d===e.uid||m===e.uid,className:"shrink-0",children:m===e.uid?(0,t.jsx)(C.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(T.Copy,{className:"h-4 w-4"})})]},e.uid))})]})})}var P=e.i(630283);function S(e){let{avatarSrc:f,avatarFallback:g=(0,t.jsx)(p.User,{})}=e,[y,w]=(0,x.useState)(!1),[j,N]=(0,x.useState)(!1),{user:T,isReadAdmin:C,isUpgradedTo:S,isInternal:k,claims:A}=(0,r.useUser)(),{t:I}=(0,c.useT)(),R=(0,o.isTestUser)(T),D=null!=T&&!!T.uid&&(0,o.isAbleToSwitchToTestUser)({uid:null==T?void 0:T.uid,...A}),_=R?l.testUserProfiles.find(e=>e.uid===(null==T?void 0:T.uid)):null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.Popover,{open:y,onOpenChange:w,children:[(0,t.jsx)(a.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{variant:"ghost",className:(0,d.cn)("relative flex items-center justify-between gap-3 overflow-auto rounded-full px-4 py-2 shadow-xs",R?"bg-blue-50 hover:bg-blue-100":"hover:bg-background bg-white"),children:[y?(0,t.jsx)(v.X,{className:"h-5 w-5 text-gray-700"}):(0,t.jsx)(m,{className:"h-5 w-5 text-gray-700"}),(0,t.jsxs)(n.Avatar,{className:"h-8 w-8 border border-gray-200",children:[(0,t.jsx)(n.AvatarImage,{src:f,alt:"User avatar"}),(0,t.jsx)(n.AvatarFallback,{children:g})]}),S.length>0&&(0,t.jsx)("div",{className:"absolute top-1 right-1 h-2.5 w-2.5 rounded-full border border-white bg-orange-500"})]})}),(0,t.jsxs)(a.PopoverContent,{align:"end",className:"max-h-[calc(100vh-5rem)] w-auto max-w-[calc(100vw-2rem)] overflow-y-auto rounded-xl bg-white p-6",children:[R&&_&&(0,t.jsxs)("div",{className:"mb-4 rounded-md border border-blue-200 bg-blue-50 px-3 py-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-blue-900",children:"Logged in as Test User"}),(0,t.jsx)("div",{className:"text-xs text-blue-700",children:_.profile.email})]}),C&&(0,t.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,t.jsx)(h.AdminMenuContent,{onItemClick:()=>w(!1)}),(0,t.jsx)("div",{className:"my-2 border-t border-gray-200"})]}),D&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"block w-full rounded-md px-3 py-2 text-left text-sm text-gray-900 transition-colors hover:bg-gray-100",onClick:()=>{N(!0),w(!1)},children:"Switch to Test User"}),(0,t.jsx)("div",{className:"my-2 border-t border-gray-200"})]}),k&&(0,t.jsx)(b,{}),(0,t.jsx)("div",{className:"my-4",children:(0,t.jsx)(P.UpgradedRolesDisplay,{})}),(0,t.jsx)("button",{className:"text-base font-medium text-gray-900 hover:text-gray-700",onClick:()=>{(0,u.signOut)((0,u.getAuth)((0,i.init)().app))},children:I("Log out")})]})]}),(0,t.jsx)(E,{isOpen:j,onClose:()=>N(!1)})]})}let k=()=>{var e;let{userProfile:n}=(0,r.useUser)();return(0,N.usePathname)().startsWith("/admin")&&(null==n?void 0:n.uid)?(0,t.jsx)("div",{className:"fixed top-0 right-0 z-[30] hidden w-full overflow-visible md:block",children:(0,t.jsx)("div",{className:"absolute top-20 right-1 md:right-10",children:(0,t.jsx)(S,{avatarSrc:null==(e=n.profilePicture)?void 0:e.url})})}):null}},256503,e=>{"use strict";e.s(["GlobalOptionsSync",()=>a]);var t=e.i(951984),r=e.i(669927),n=e.i(555212),s=e.i(271645);let a=()=>{let{isTestUser:e}=(0,t.useUser)(),{testId:a}=(0,n.useTestMode)();return(0,s.useMemo)(()=>{(0,r.setGlobalReadOptions)({onlyTestDocs:e}),(0,r.setGlobalWriteOptions)({isTestDoc:e}),(0,r.setTestId)(e&&a||void 0)},[e,a]),null}},334863,e=>{"use strict";e.s(["Toaster",()=>es],334863);var t=e.i(843476),r=e.i(120682),n=e.i(271645),s=e.i(174080),a=e.i(981140),i=e.i(820783),o=e.i(75830),l=e.i(30030),c=e.i(726330),d=e.i(774606),u=e.i(296626),m=e.i(248425),p=e.i(30207),v=e.i(369340),x=e.i(934620),h=e.i(959411),f="ToastProvider",[g,y,w]=(0,o.createCollection)("Toast"),[b,j]=(0,l.createContextScope)("Toast",[w]),[N,T]=b(f),C=e=>{let{__scopeToast:r,label:s="Notification",duration:a=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:l}=e,[c,d]=n.useState(null),[u,m]=n.useState(0),p=n.useRef(!1),v=n.useRef(!1);return s.trim()||console.error("Invalid prop `label` supplied to `".concat(f,"`. Expected non-empty `string`.")),(0,t.jsx)(g.Provider,{scope:r,children:(0,t.jsx)(N,{scope:r,label:s,duration:a,swipeDirection:i,swipeThreshold:o,toastCount:u,viewport:c,onViewportChange:d,onToastAdd:n.useCallback(()=>m(e=>e+1),[]),onToastRemove:n.useCallback(()=>m(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:v,children:l})})};C.displayName=f;var E="ToastViewport",P=["F8"],S="toast.viewportPause",k="toast.viewportResume",A=n.forwardRef((e,r)=>{let{__scopeToast:s,hotkey:a=P,label:o="Notifications ({hotkey})",...l}=e,d=T(E,s),u=y(s),p=n.useRef(null),v=n.useRef(null),x=n.useRef(null),h=n.useRef(null),f=(0,i.useComposedRefs)(r,h,d.onViewportChange),w=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=d.toastCount>0;n.useEffect(()=>{let e=e=>{var t;0!==a.length&&a.every(t=>e[t]||e.code===t)&&(null==(t=h.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),n.useEffect(()=>{let e=p.current,t=h.current;if(b&&e&&t){let r=()=>{if(!d.isClosePausedRef.current){let e=new CustomEvent(S);t.dispatchEvent(e),d.isClosePausedRef.current=!0}},n=()=>{if(d.isClosePausedRef.current){let e=new CustomEvent(k);t.dispatchEvent(e),d.isClosePausedRef.current=!1}},s=t=>{e.contains(t.relatedTarget)||n()},a=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",s),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",a),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",s),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",a),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[b,d.isClosePausedRef]);let j=n.useCallback(e=>{let{tabbingDirection:t}=e,r=u().map(e=>{let r=e.ref.current,n=[r,...function(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}(r)];return"forwards"===t?n:n.reverse()});return("forwards"===t?r.reverse():r).flat()},[u]);return n.useEffect(()=>{let e=h.current;if(e){let t=t=>{let r=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!r){var n,s,a;let r=document.activeElement,i=t.shiftKey;if(t.target===e&&i){null==(n=v.current)||n.focus();return}let o=j({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===r);V(o.slice(l+1))?t.preventDefault():i?null==(s=v.current)||s.focus():null==(a=x.current)||a.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[u,j]),(0,t.jsxs)(c.Branch,{ref:p,role:"region","aria-label":o.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&(0,t.jsx)(R,{ref:v,onFocusFromOutsideViewport:()=>{V(j({tabbingDirection:"forwards"}))}}),(0,t.jsx)(g.Slot,{scope:s,children:(0,t.jsx)(m.Primitive.ol,{tabIndex:-1,...l,ref:f})}),b&&(0,t.jsx)(R,{ref:x,onFocusFromOutsideViewport:()=>{V(j({tabbingDirection:"backwards"}))}})]})});A.displayName=E;var I="ToastFocusProxy",R=n.forwardRef((e,r)=>{let{__scopeToast:n,onFocusFromOutsideViewport:s,...a}=e,i=T(I,n);return(0,t.jsx)(h.VisuallyHidden,{tabIndex:0,...a,ref:r,style:{position:"fixed"},onFocus:e=>{var t;let r=e.relatedTarget;(null==(t=i.viewport)?void 0:t.contains(r))||s()}})});R.displayName=I;var D="Toast",_=n.forwardRef((e,r)=>{let{forceMount:n,open:s,defaultOpen:i,onOpenChange:o,...l}=e,[c,d]=(0,v.useControllableState)({prop:s,defaultProp:null==i||i,onChange:o,caller:D});return(0,t.jsx)(u.Presence,{present:n||c,children:(0,t.jsx)(U,{open:c,...l,ref:r,onClose:()=>d(!1),onPause:(0,p.useCallbackRef)(e.onPause),onResume:(0,p.useCallbackRef)(e.onResume),onSwipeStart:(0,a.composeEventHandlers)(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:(0,a.composeEventHandlers)(e.onSwipeMove,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(r,"px"))}),onSwipeCancel:(0,a.composeEventHandlers)(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:(0,a.composeEventHandlers)(e.onSwipeEnd,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(r,"px")),d(!1)})})})});_.displayName=D;var[L,O]=b(D,{onClose(){}}),U=n.forwardRef((e,r)=>{let{__scopeToast:o,type:l="foreground",duration:d,open:u,onClose:v,onEscapeKeyDown:x,onPause:h,onResume:f,onSwipeStart:y,onSwipeMove:w,onSwipeCancel:b,onSwipeEnd:j,...N}=e,C=T(D,o),[E,P]=n.useState(null),A=(0,i.useComposedRefs)(r,e=>P(e)),I=n.useRef(null),R=n.useRef(null),_=d||C.duration,O=n.useRef(0),U=n.useRef(_),M=n.useRef(0),{onToastAdd:H,onToastRemove:W}=C,G=(0,p.useCallbackRef)(()=>{var e;(null==E?void 0:E.contains(document.activeElement))&&(null==(e=C.viewport)||e.focus()),v()}),J=n.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(M.current),O.current=new Date().getTime(),M.current=window.setTimeout(G,e))},[G]);n.useEffect(()=>{let e=C.viewport;if(e){let t=()=>{J(U.current),null==f||f()},r=()=>{let e=new Date().getTime()-O.current;U.current=U.current-e,window.clearTimeout(M.current),null==h||h()};return e.addEventListener(S,r),e.addEventListener(k,t),()=>{e.removeEventListener(S,r),e.removeEventListener(k,t)}}},[C.viewport,_,h,f,J]),n.useEffect(()=>{u&&!C.isClosePausedRef.current&&J(_)},[u,_,C.isClosePausedRef,J]),n.useEffect(()=>(H(),()=>W()),[H,W]);let K=n.useMemo(()=>E?function e(t){let r=[];return Array.from(t.childNodes).forEach(t=>{var n;if(t.nodeType===t.TEXT_NODE&&t.textContent&&r.push(t.textContent),(n=t).nodeType===n.ELEMENT_NODE){let n=t.ariaHidden||t.hidden||"none"===t.style.display,s=""===t.dataset.radixToastAnnounceExclude;if(!n)if(s){let e=t.dataset.radixToastAnnounceAlt;e&&r.push(e)}else r.push(...e(t))}}),r}(E):null,[E]);return C.viewport?(0,t.jsxs)(t.Fragment,{children:[K&&(0,t.jsx)(F,{__scopeToast:o,role:"status","aria-live":"foreground"===l?"assertive":"polite",children:K}),(0,t.jsx)(L,{scope:o,onClose:G,children:s.createPortal((0,t.jsx)(g.ItemSlot,{scope:o,children:(0,t.jsx)(c.Root,{asChild:!0,onEscapeKeyDown:(0,a.composeEventHandlers)(x,()=>{C.isFocusedToastEscapeKeyDownRef.current||G(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,t.jsx)(m.Primitive.li,{tabIndex:0,"data-state":u?"open":"closed","data-swipe-direction":C.swipeDirection,...N,ref:A,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{"Escape"===e.key&&(null==x||x(e.nativeEvent),e.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,G()))}),onPointerDown:(0,a.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(I.current={x:e.clientX,y:e.clientY})}),onPointerMove:(0,a.composeEventHandlers)(e.onPointerMove,e=>{if(!I.current)return;let t=e.clientX-I.current.x,r=e.clientY-I.current.y,n=!!R.current,s=["left","right"].includes(C.swipeDirection),a=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,i=s?a(0,t):0,o=s?0:a(0,r),l="touch"===e.pointerType?10:2,c={x:i,y:o},d={originalEvent:e,delta:c};n?(R.current=c,z("toast.swipeMove",w,d,{discrete:!1})):X(c,C.swipeDirection,l)?(R.current=c,z("toast.swipeStart",y,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(I.current=null)}),onPointerUp:(0,a.composeEventHandlers)(e.onPointerUp,e=>{let t=R.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),R.current=null,I.current=null,t){let r=e.currentTarget,n={originalEvent:e,delta:t};X(t,C.swipeDirection,C.swipeThreshold)?z("toast.swipeEnd",j,n,{discrete:!0}):z("toast.swipeCancel",b,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),F=e=>{let{__scopeToast:r,children:s,...a}=e,i=T(D,r),[o,l]=n.useState(!1),[c,u]=n.useState(!1);return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=(0,p.useCallbackRef)(e);(0,x.useLayoutEffect)(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>l(!0)),n.useEffect(()=>{let e=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(e)},[]),c?null:(0,t.jsx)(d.Portal,{asChild:!0,children:(0,t.jsx)(h.VisuallyHidden,{...a,children:o&&(0,t.jsxs)(t.Fragment,{children:[i.label," ",s]})})})},M=n.forwardRef((e,r)=>{let{__scopeToast:n,...s}=e;return(0,t.jsx)(m.Primitive.div,{...s,ref:r})});M.displayName="ToastTitle";var H=n.forwardRef((e,r)=>{let{__scopeToast:n,...s}=e;return(0,t.jsx)(m.Primitive.div,{...s,ref:r})});H.displayName="ToastDescription";var W="ToastAction",G=n.forwardRef((e,r)=>{let{altText:n,...s}=e;return n.trim()?(0,t.jsx)(Y,{altText:n,asChild:!0,children:(0,t.jsx)(K,{...s,ref:r})}):(console.error("Invalid prop `altText` supplied to `".concat(W,"`. Expected non-empty `string`.")),null)});G.displayName=W;var J="ToastClose",K=n.forwardRef((e,r)=>{let{__scopeToast:n,...s}=e,i=O(J,n);return(0,t.jsx)(Y,{asChild:!0,children:(0,t.jsx)(m.Primitive.button,{type:"button",...s,ref:r,onClick:(0,a.composeEventHandlers)(e.onClick,i.onClose)})})});K.displayName=J;var Y=n.forwardRef((e,r)=>{let{__scopeToast:n,altText:s,...a}=e;return(0,t.jsx)(m.Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:r})});function z(e,t,r,n){let{discrete:s}=n,a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?(0,m.dispatchDiscreteCustomEvent)(a,i):a.dispatchEvent(i)}var X=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Math.abs(e.x),s=Math.abs(e.y),a=n>s;return"left"===t||"right"===t?a&&n>r:!a&&s>r};function V(e){let t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var B=e.i(225913),Z=e.i(37727),q=e.i(647163);let Q=n.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)(A,{ref:r,className:(0,q.cn)("fixed top-0 z-100 flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...s})});Q.displayName=A.displayName;let $=(0,B.cva)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-(--radix-toast-swipe-end-x) data-[swipe=move]:translate-x-(--radix-toast-swipe-move-x) data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ee=n.forwardRef((e,r)=>{let{className:n,variant:s,...a}=e;return(0,t.jsx)(_,{ref:r,className:(0,q.cn)($({variant:s}),n),...a})});ee.displayName=_.displayName,n.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)(G,{ref:r,className:(0,q.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-hidden focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...s})}).displayName=G.displayName;let et=n.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)(K,{ref:r,className:(0,q.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-hidden focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 hover:group-[.destructive]:text-red-50 focus:group-[.destructive]:ring-red-400 focus:group-[.destructive]:ring-offset-red-600",n),"toast-close":"",...s,children:(0,t.jsx)(Z.X,{className:"h-4 w-4"})})});et.displayName=K.displayName;let er=n.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)(M,{ref:r,className:(0,q.cn)("text-sm font-semibold [&+div]:text-xs",n),...s})});er.displayName=M.displayName;let en=n.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)(H,{ref:r,className:(0,q.cn)("text-sm opacity-90",n),...s})});function es(){let{toasts:e}=(0,r.useToast)();return(0,t.jsxs)(C,{children:[e.map(function(e){let{id:r,title:n,description:s,action:a,...i}=e;return(0,t.jsxs)(ee,{...i,className:"bg-white",children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[n&&(0,t.jsx)(er,{children:n}),s&&(0,t.jsx)(en,{children:s})]}),a,(0,t.jsx)(et,{})]},r)}),(0,t.jsx)(Q,{})]})}en.displayName=H.displayName},543480,e=>{"use strict";e.s(["HandleAuthenticationState",()=>R],543480);var t=e.i(843476),r=e.i(532323),n=e.i(167881),s=e.i(951984),a=e.i(390421),i=e.i(676029),o=e.i(531278),l=e.i(98919),c=e.i(271645),d=e.i(653145),u=e.i(643531),m=e.i(952571),p=e.i(37727),v=e.i(647163);let x=e=>{let{text:r,links:n}=e,s=r.split(/({[^}]+})/g);return(0,t.jsx)(t.Fragment,{children:s.map((e,r)=>{if(e.startsWith("{")&&e.endsWith("}")){let s=e.slice(1,-1);return n[s]?(0,t.jsx)(c.default.Fragment,{children:n[s]},r):e}return e})})},h=e=>{let{control:r,errors:n={}}=e,s=(0,d.useWatch)({control:r,name:"tosAndPpConsent"}),a=(0,d.useWatch)({control:r,name:"medicalProcessing"}),[o,l]=(0,c.useState)(!1),h=(0,c.useRef)(()=>{}),{t:g}=(0,i.useT)(),y=(e,n,s,a,i,o)=>(0,t.jsx)(d.Controller,{name:e,control:r,rules:{required:n},render:r=>{let{field:n}=r,l=e=>{let t=void 0!==e?e:!n.value;n.onChange(t),!t&&o&&h.current(!1)};return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:(0,v.cn)("flex items-start space-x-3 transition-opacity",i&&"opacity-50"),children:[(0,t.jsxs)("div",{className:"flex-shrink-0 mt-0.5",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!n.value,onChange:e=>!i&&l(e.target.checked),className:"sr-only","aria-invalid":!!a,"aria-disabled":i}),(0,t.jsx)("div",{onClick:()=>!i&&l(),className:(0,v.cn)("w-5 h-5 rounded border-2 flex items-center justify-center transition-all duration-200",i?"border-gray-300 bg-gray-100 cursor-not-allowed":"cursor-pointer",n.value?"border-transparent":"border-gray-400 hover:border-gray-500",a&&"border-red-500"),style:{background:n.value&&!i?"linear-gradient(135deg, #4C2652 0%, #5C4279 100%)":"transparent"},role:"checkbox","aria-checked":!!n.value,tabIndex:i?-1:0,onKeyDown:e=>{i||" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),l())},children:n.value&&(0,t.jsx)(u.Check,{className:"w-4 h-4 text-white"})})]}),(0,t.jsx)("div",{className:"flex-1",children:s(()=>!i&&l())})]}),a&&(0,t.jsx)("span",{id:"".concat(e,"-error"),className:"text-sm text-red-600 ml-8 block",children:g(f.privacyconsentfield_RequiredError)})]})}});return(0,t.jsx)("div",{className:"font-sans text-gray-800",children:(0,t.jsxs)("div",{className:"space-y-4",children:[y("tosAndPpConsent",!0,e=>(0,t.jsx)("label",{onClick:e,className:"text-sm text-gray-700 cursor-pointer leading-relaxed",children:(0,t.jsx)(x,{text:g(f.privacyconsentfield_TosAndPp_Text),links:{termsLink:(0,t.jsx)("a",{href:f.terms_conditions_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium underline text-[rgb(92,66,121)]",onClick:e=>e.stopPropagation(),children:g(f.privacyconsentfield_TosAndPp_TermsLinkText)}),privacyLink:(0,t.jsx)("a",{href:f.privacy_policy_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium underline text-[rgb(92,66,121)]",onClick:e=>e.stopPropagation(),children:g(f.privacyconsentfield_TosAndPp_PrivacyLinkText)})}})}),n.tosAndPpConsent,!1,!0),y("medicalProcessing",!0,e=>(0,t.jsx)("label",{onClick:e,className:"text-sm text-gray-700 cursor-pointer leading-relaxed",children:(0,t.jsx)(x,{text:g(f.privacyconsentfield_MedicalData_Text),links:{consentLink:(0,t.jsx)("a",{href:f.medical_data_sharing_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium underline text-[rgb(92,66,121)]",onClick:e=>e.stopPropagation(),children:g(f.privacyconsentfield_MedicalData_ConsentLinkText)})}})}),n.medicalProcessing,!1,!0),(0,t.jsx)(d.Controller,{name:"anonymousDataUsage",control:r,render:e=>{let{field:r}=e;h.current=r.onChange;let n=!s||!a;return(0,t.jsx)("div",{className:(0,v.cn)("space-y-2 transition-opacity",n&&"opacity-50"),children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 mt-0.5",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!r.value,onChange:e=>!n&&r.onChange(e.target.checked),className:"sr-only","aria-disabled":n}),(0,t.jsx)("div",{onClick:()=>!n&&r.onChange(!r.value),className:(0,v.cn)("w-5 h-5 rounded border-2 flex items-center justify-center transition-all duration-200",n?"border-gray-300 bg-gray-100 cursor-not-allowed":"cursor-pointer",r.value?"border-transparent":"border-gray-400 hover:border-gray-500"),style:{background:r.value&&!n?"linear-gradient(135deg, #4C2652 0%, #5C4279 100%)":"transparent"},role:"checkbox","aria-checked":!!r.value,tabIndex:n?-1:0,children:r.value&&(0,t.jsx)(u.Check,{className:"w-4 h-4 text-white"})})]}),(0,t.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,t.jsx)("label",{onClick:()=>!n&&r.onChange(!r.value),className:(0,v.cn)("text-sm text-gray-700 leading-relaxed",n?"cursor-not-allowed":"cursor-pointer"),children:(0,t.jsx)("span",{className:"mt-[1px]",children:g(f.privacyconsentfield_Optional_Text)})}),g(f.privacyconsentfield_Optional_Tooltip)&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Info,{className:(0,v.cn)("w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5 cursor-pointer hover:text-gray-600",n&&"opacity-50"),onClick:e=>{e.stopPropagation(),n||l(!o)}}),o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-[9998]",onClick:e=>{e.stopPropagation(),l(!1)}}),(0,t.jsxs)("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[90vw] max-w-sm bg-gray-900 text-white rounded-lg p-4 shadow-2xl z-[9999]",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),l(!1)},className:"absolute top-2 right-2 text-white/70 hover:text-white",children:(0,t.jsx)(p.X,{className:"h-4 w-4"})}),(0,t.jsx)("p",{className:"text-sm pr-6",children:g(f.privacyconsentfield_Optional_Tooltip)})]})]})]})]})]})})}})]})})},f={privacyconsentfield_TosAndPp_Text:"I agree to Ahead Health's {termsLink} and confirm that I have read the {privacyLink}.",privacyconsentfield_TosAndPp_TermsLinkText:"Terms & Conditions",privacyconsentfield_TosAndPp_PrivacyLinkText:"Privacy Policy",privacyconsentfield_MedicalData_Text:"I agree to the {consentLink}.",privacyconsentfield_MedicalData_ConsentLinkText:"Consent for the Use and Secure Sharing of my Medical Data",privacyconsentfield_Optional_Text:"I consent to the use of my anonymised data for product improvement (optional)",privacyconsentfield_Optional_Tooltip:"This helps Ahead Health enhance its services and provide better, more personalised care. Giving consent is voluntary, does not affect your access to services, and you may withdraw it at any time.",privacyconsentfield_RequiredError:"This consent is required to proceed.",privacy_policy_url:"https://www.aheadhealth.com/privacy",terms_conditions_url:"https://www.aheadhealth.com/terms-conditions",medical_data_sharing_url:"https://www.aheadhealth.com/medical-data-sharing"};function g(e){let{onComplete:r}=e,{t:u}=(0,i.useT)(),{user:m}=(0,s.useUser)(),[p,v]=(0,c.useState)(!1),[x,f]=(0,c.useState)(null),{control:g,handleSubmit:y,formState:{errors:w}}=(0,d.useForm)({defaultValues:{tosAndPpConsent:!1,medicalProcessing:!1,anonymousDataUsage:!1}}),b=async e=>{if((null==m?void 0:m.uid)&&(null==m?void 0:m.email)){v(!0),f(null);try{let t=new Date().toISOString().split("T")[0],n={tosAndPp:{acceptedDate:e.tosAndPpConsent?t:null,version:1,optional:!1},medicalProcessing:{acceptedDate:e.medicalProcessing?t:null,version:1,optional:!1},anonymousDataUsage:{acceptedDate:e.anonymousDataUsage?t:null,version:1,optional:!0}};await (0,a.setDoc)("userProfile",m.uid,{consent:n});let s="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,i={email:m.email,tosAndPpConsentDate:e.tosAndPpConsent?t:null,medicalProcessingConsentDate:e.medicalProcessing?t:null,anonymousDataUsageConsentDate:e.anonymousDataUsage?t:null};await fetch(s?"http://127.0.0.1:54321/functions/v1/relay-consent":"https://rnaixxwwvyedkujwijlp.supabase.co/functions/v1/relay-consent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s?"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJuYWl4eHd3dnllZGt1andpamxwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg2MTQ3NjUsImV4cCI6MjA1NDE5MDc2NX0.-Zjo0-YsilhjvooPC40aHCYvcIVB-6X6KgaUwEmrmhA")},body:JSON.stringify(i)}),r()}catch(e){console.error("Error saving consent:",e),f(u("Failed to save consent. Please try again."))}finally{v(!1)}}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:(0,t.jsx)("div",{className:"w-full max-w-md overflow-hidden rounded-lg border border-slate-200 bg-white shadow-xl",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center mb-6",children:[(0,t.jsx)(l.Shield,{className:"h-10 w-10 text-aubergine-600"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:u("Consent Required")}),(0,t.jsx)("p",{className:"text-sm text-slate-600",children:u("Please review and accept the following consents to continue.")})]}),x&&(0,t.jsx)("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-800",children:x}),(0,t.jsxs)("form",{onSubmit:y(b),className:"space-y-4",children:[(0,t.jsx)(h,{control:g,errors:w}),(0,t.jsx)(n.Button,{type:"submit",disabled:p,className:"w-full bg-aubergine-600 hover:bg-aubergine-700",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),u("Saving...")]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Shield,{className:"mr-2 h-4 w-4"}),u("Continue")]})})]})]})})})}var y=e.i(662537),w=e.i(618566),b=e.i(604570),j=e.i(589282),N=e.i(113447),T=e.i(766255),C=e.i(732644);e.i(151718);var E=e.i(506973),P=e.i(908083),S=e.i(555212),k=e.i(330009),A=e.i(736749);let I=["/profile","/home","/questionnaire"],R=e=>{var n,i,o,l,d;let{children:u}=e,m=(0,w.usePathname)(),p=(0,w.useRouter)(),v=(0,w.useParams)(),x=(0,w.useSearchParams)(),h=x.get(T.prefillSignInEmailParamName),f=x.get(T.redirectParamName)||"/home",R=x.get("testUserId"),D=(0,s.useUser)(),_=m.includes("/sign_in"),{isTestMode:L}=(0,S.useTestMode)(),[O,U]=(0,c.useState)(!1),[F,M]=(0,c.useState)(null),[H,W]=(0,c.useState)(!1),G=(0,c.useRef)(!1),{setUserLoading:J,isTestUser:K}=D,Y=(0,c.useCallback)(async()=>{G.current=!0,J(!0);let e=await fetch("/api/get-test-user-auth-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({testUserId:R})});if(!e.ok){console.error("Failed to get test user auth token"),G.current=!1,J(!1),W(!0);return}let{customToken:t}=await e.json();await (0,E.signInWithCustomToken)((0,E.getAuth)((0,P.init)().app),t);let r=new URLSearchParams(x.toString());r.delete("testUserId");let n=r.toString();p.replace("".concat(m).concat(n?"?".concat(n):"")),G.current=!1},[R,m,p,x,J]),z=(0,c.useCallback)(async()=>{if(!F)return;G.current=!0,J(!0),U(!1);let e=await fetch("/api/get-test-user-auth-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({testUserId:F})});if(!e.ok){console.error("Failed to get test user auth token"),M(null),G.current=!1,J(!1);return}let{customToken:t}=await e.json();await (0,E.signInWithCustomToken)((0,E.getAuth)((0,P.init)().app),t);let r=new URLSearchParams(x.toString());r.delete("testUserId");let n=r.toString();p.replace("".concat(m).concat(n?"?".concat(n):"")),M(null),G.current=!1},[F,m,p,x,J]),X=(0,c.useCallback)(()=>{let e=new URLSearchParams(x.toString());e.delete("testUserId");let t=e.toString();p.replace("".concat(m).concat(t?"?".concat(t):"")),U(!1),M(null)},[m,p,x]);(0,c.useEffect)(()=>{var e;(null==(e=D.user)?void 0:e.uid)?((0,y.setUser)({id:D.user.uid,email:D.user.email||void 0}),b.default.identify(D.user.uid,{email:D.user.email})):b.default.reset()},[null==(n=D.user)?void 0:n.uid]);let V=null==D||null==(i=D.userProfile)?void 0:i.interfaceLanguage,B=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=v.lng||"en",r=(0,j.addParamsToLink)("/".concat(t,"/sign_in"),{[T.prefillSignInEmailParamName]:h,redirect:m,sign_up:e?"true":null});p.push(r)},Z=async()=>{var e;if(!D.user)return;let t=D.isInternal||D.isPractitioner||D.isReadAdmin;(null==(e=D.userProfile)?void 0:e.createdAt)||D.userProfileIsLoading||await (0,a.createDoc)("userProfile",{role:t?N.UserRole.ExternalViewer:N.UserRole.Patient,internalRoles:D.claims,email:D.user.email,name:{first:"",last:""},...D.userProfile},{id:D.user.uid})},q=!!R,Q=(null==(o=D.user)?void 0:o.uid)===R,$=G.current,ee=!!D.user,et=ee&&!K,er=I.some(e=>m.includes(e)),en=D.isFullySecured,es=(()=>{var e;if(!(null==(e=D.userProfile)?void 0:e.consent))return!1;let t=D.userProfile.consent,r=t.tosAndPp&&!t.tosAndPp.acceptedDate&&1===t.tosAndPp.version,n=t.medicalProcessing&&!t.medicalProcessing.acceptedDate&&1===t.medicalProcessing.version;return r||n})(),ea=ee&&!(D.isInternal||D.isReadAdmin||D.isPractitioner)&&!m.includes("/admin")&&!L&&window.location.host.includes("admin"),ei=V&&v.lng&&v.lng!==V,eo=(0,t.jsx)(r.WholePageLoading,{}),el=(0,t.jsxs)(t.Fragment,{children:[u,(0,t.jsx)(C.default,{children:(0,t.jsx)(g,{onComplete:()=>{p.push(f)}})})]}),ec=(0,t.jsxs)(t.Fragment,{children:[u,(0,t.jsx)(k.AlertDialog,{open:O,onOpenChange:U,children:(0,t.jsxs)(k.AlertDialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(k.AlertDialogHeader,{children:[(0,t.jsx)(k.AlertDialogTitle,{className:"text-destructive",children:"⚠️ Warning: This Will Log You Out"}),(0,t.jsxs)(k.AlertDialogDescription,{children:[(0,t.jsx)("div",{className:"text-foreground mb-3 text-base font-semibold",children:"You are currently logged in as:"}),(0,t.jsx)("div",{className:"text-foreground mb-4 text-lg font-bold",children:null==(l=D.user)?void 0:l.email}),(0,t.jsxs)("div",{className:"bg-destructive/10 border-destructive/20 mb-4 rounded-md border p-4",children:[(0,t.jsx)("div",{className:"text-destructive mb-2 font-semibold",children:"If you switch to a test user:"}),(0,t.jsxs)("ul",{className:"text-destructive list-inside list-disc space-y-1",children:[(0,t.jsx)("li",{children:"You will be LOGGED OUT immediately"}),(0,t.jsx)("li",{children:"You will not be able to run more tests after this one"})]})]}),(0,t.jsxs)("div",{className:"bg-primary/10 border-primary/20 rounded-md border p-4",children:[(0,t.jsx)("div",{className:"text-foreground mb-1 font-semibold",children:"✅ Recommended Instead:"}),(0,t.jsx)("div",{className:"text-foreground",children:"Open an incognito/private browser window to test with a test user account while staying logged in here."})]})]})]}),(0,t.jsxs)(k.AlertDialogFooter,{children:[(0,t.jsx)(k.AlertDialogCancel,{onClick:X,children:"Cancel (Recommended)"}),(0,t.jsx)(k.AlertDialogAction,{onClick:z,className:"bg-destructive hover:bg-destructive/90",children:"Log Me Out and Switch User"})]})]})})]}),ed=(0,t.jsx)(t.Fragment,{children:u}),eu=(0,t.jsx)("div",{children:(0,t.jsx)(k.AlertDialog,{open:!0,onOpenChange:()=>{},children:(0,t.jsx)(k.AlertDialogContent,{children:(0,t.jsxs)(k.AlertDialogHeader,{children:[(0,t.jsx)(k.AlertDialogTitle,{children:"Failed to login as test user"}),(0,t.jsx)(k.AlertDialogDescription,{children:"We were unable to login as the test user. Please try again or use a different user."})]})})})}),em={INITIALIZING:{isActive:D.loading,onStateEnter:()=>{},render:eo},TEST_USER_LOGIN_FAILED:{isActive:H&&q,onStateEnter:()=>{},render:eu},TEST_USER_SWITCH_CONFIRMATION_SHOULD_START:{isActive:q&&et&&!Q&&!O,onStateEnter:()=>{M(R),U(!0)},render:ed},TEST_USER_SWITCH_CONFIRMATION:{isActive:O&&q&&et,onStateEnter:()=>{},render:ec},TEST_USER_SIGN_IN_SHOULD_START:{isActive:q&&!Q&&!$&&!H&&(!ee||K),onStateEnter:async()=>{await Y()},render:eo},USER_PROFILE_INITIALIZATION_SHOULD_START:{isActive:ee&&!(null==(d=D.userProfile)?void 0:d.createdAt)&&!D.userProfileIsLoading,onStateEnter:async()=>{await Z()},render:eo},UNAUTHENTICATED_ON_PROTECTED_ROUTE:{isActive:er&&!ee,onStateEnter:()=>{B()},render:eo},NOT_FULLY_SECURED_ON_PROTECTED_ROUTE:{isActive:er&&ee&&!en,onStateEnter:()=>{B()},render:eo},CONSENT_REQUIRED:{isActive:ee&&en&&es,onStateEnter:()=>{},render:el},AUTHENTICATED_ON_SIGNIN_PAGE:{isActive:_&&ee&&en&&!es,onStateEnter:()=>{p.push(f)},render:eo},WRONG_DOMAIN:{isActive:ea,onStateEnter:()=>{window.location.href="https://my.aheadhealth.com".concat(m)},render:eo},WRONG_LANGUAGE:{isActive:ee&&ei,onStateEnter:()=>{(()=>{if(V&&v.lng&&v.lng!==V){let e=window.location.href.replace("/".concat(v.lng,"/"),"/".concat(V,"/"));console.log("redirecting to",e),p.push(e)}})()},render:eo},READY:{isActive:!1,onStateEnter:()=>{},render:ed}};em.READY.isActive=!Object.entries(em).filter(e=>{let[t]=e;return"READY"!==t}).some(e=>{let[,t]=e;return t.isActive});let ep=Object.entries(em).filter(e=>{let[,t]=e;return t.isActive}).map(e=>{let[t]=e;return t});ep.length>1&&!(0,A.isServerside)()&&console.warn("⚠️ Multiple auth states active:",ep);let ev=Object.entries(em).find(e=>{let[,t]=e;return t.isActive}),ex=null==ev?void 0:ev[0];return(0,c.useEffect)(()=>{if(ex){let e=em[ex];console.log("Current auth state:",ex),null==e||e.onStateEnter()}},[ex]),ev?ev[1].render:ed}}]);

//# sourceMappingURL=e42b4b9b033bba0c.js.map
//# debugId=a5129787-53a6-5bf0-addd-c27ee5b50187
