
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="268c51ef-71d6-5d27-95b3-53eac80ad58b")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,727851,(e,t,r)=>{t.exports=function(e){return null===e}},173519,e=>{"use strict";e.s(["useSearchParamSyncedState",()=>s]);var t=e.i(374009),r=e.i(629873),n=e.i(727851),i=e.i(618566),o=e.i(271645);let l=new Map,a=null;function s(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=(0,i.useSearchParams)().get(e),[c,d]=(0,o.useState)(u||s);(0,o.useEffect)(()=>{a||(a=(0,t.default)(()=>{let e=new URLSearchParams(window.location.search),t=window.location.hash;l.forEach((t,i)=>{(0,r.default)(t)||""===t?((0,n.default)(t)||""===t)&&e.delete(i):e.set(i,t)});let i="".concat(window.location.pathname,"?").concat(e.toString()).concat(t);window.history.pushState({},"",i),window.dispatchEvent(new Event("searchparamschange")),l.clear()},100))},[]),(0,o.useEffect)(()=>{let e=null!=u?u:s;c!==e&&d(e)},[u,s]),(0,o.useEffect)(()=>{let t=()=>{var t;d(null!=(t=new URLSearchParams(window.location.search).get(e))?t:s)};return window.addEventListener("popstate",t),window.addEventListener("searchparamschange",t),()=>{window.removeEventListener("popstate",t),window.removeEventListener("searchparamschange",t)}},[e,s]);let p=(0,o.useCallback)(t=>{d(t),l.set(e,t),null==a||a()},[e]);return(0,o.useMemo)(()=>[c,p],[c,p])}},395361,e=>{"use strict";e.s(["dpIsActive",()=>t]);let t=e=>{var t,r,n;return(null==(t=e.info)?void 0:t.active)||!(null==(n=e.dataPoint)||null==(r=n.biomarkerData)?void 0:r.biomarkerId)}},665512,e=>{"use strict";e.s(["applyOverrideConfigs",()=>c,"getBiomarkerInfoObs",()=>d,"getBulkDataPointsWithHydratedInfoObs",()=>m,"useBulkDataPointsWithHydratedInfo",()=>v,"useDataPointsWithHydratedInfo",()=>p]);var t=e.i(717038),r=e.i(995446),n=e.i(630330),i=e.i(94059),o=e.i(245281),l=e.i(827341),a=e.i(134352),s=e.i(271645);let u=e=>(0,t.docObs)("report",e).pipe((0,l.shareReplay)({bufferSize:1,refCount:!0}),(0,a.switchMap)(e=>{let r=(null==e?void 0:e.activityOverrideConfigKeys)||[];if(0===r.length)return(0,o.of)([]);let i=r.map(e=>(0,t.docObs)("biomarkerActivityOverrideConfig",e));return(0,n.combineLatest)(i)})),c=(e,t)=>{if(!t)return e;let r=e.active;for(let i of t)if(i){var n;let t=null==(n=i.biomarkerEntries)?void 0:n.find(t=>t.biomarkerId===e.uid);if(void 0!==t){r=t.overrideValue;break}}return{...e,active:r}},d=(e,r)=>{var l,a;let s=null==e||null==(a=e.dataPoint)||null==(l=a.biomarkerData)?void 0:l.biomarkerId;if(!s)return(0,o.of)({...e,info:null});let d=(0,t.docObs)("biomarkerInfo",String(s));return r?(0,n.combineLatest)([d,u(r)]).pipe((0,i.map)(t=>{let[r,n]=t;if(!r)return{...e,info:null};let i=c(r,n);return{...e,info:i}})):d.pipe((0,i.map)(t=>({...e,info:t})))},p=(e,t)=>{let i=(0,r.useObs)(((e,t)=>{let r=e.map(e=>d(e,t));return r.length>0?(0,n.combineLatest)(r):(0,o.of)([])})(e||[],t),[e,t]);return(0,s.useMemo)(()=>i||[],[i])},m=(e,r)=>{let a=(0,t.queryObs)("biomarkerInfo",()=>[]),s=r?u(r):(0,o.of)([]);return(0,n.combineLatest)([a,s]).pipe((0,i.map)(t=>{let[r,n]=t;return e.map(e=>{var t,i;let o=null==(i=e.dataPoint)||null==(t=i.biomarkerData)?void 0:t.biomarkerId;if(o){let t=null==r?void 0:r.find(e=>e.uid===o);if(t){let r=n?c(t,n):t;return{...e,info:r}}}return{...e,info:null}})}),(0,l.shareReplay)({bufferSize:1,refCount:!0}))},v=(e,t)=>{let n=(0,r.useObs)(m(e||[],t),[e,t]);return(0,s.useMemo)(()=>n||[],[n])}},159556,e=>{"use strict";e.s(["FINDING_SOURCE_FILE_DOWNLOADABLE_STATUSES",()=>r,"SourceFileDownloadableStatus",()=>t,"SourceFileDownloadableStatusLabels",()=>n,"SourceFileProcessingStage",()=>o,"getSourceFileLabel",()=>i]);var t=function(e){return e.CUSTOM_SOURCE="CUSTOM_SOURCE",e.CT_SOURCE="CT_SOURCE",e.CT_LUNG_SOURCE="CT_LUNG_SOURCE",e.CT_CALCIUM_SOURCE="CT_CALCIUM_SOURCE",e.MRI_SOURCE="MRI_SOURCE",e.MAMMA_SOURCE="MAMMA_SOURCE",e.LAB_SOURCE="LAB_SOURCE",e.DEXA_SOURCE="DEXA_SOURCE",e}({});let r=["MRI_SOURCE","CT_SOURCE","MAMMA_SOURCE","CT_LUNG_SOURCE"],n={CUSTOM_SOURCE:"Custom",CT_SOURCE:"CT report",MAMMA_SOURCE:"MAMMA report",CT_LUNG_SOURCE:"CT Lung report",CT_CALCIUM_SOURCE:"CT Calcium report",MRI_SOURCE:"MRI report",LAB_SOURCE:"Lab report",DEXA_SOURCE:"DEXA report"},i=e=>"CUSTOM_SOURCE"===e.downloadableStatus?e.sourceFileDownloadLabel:n[e.downloadableStatus];var o=function(e){return e.EXTRACT_DATA_POINTS="extractDataPoints",e.EXTRACT_RANGES="extractRanges",e}({})},392294,e=>{"use strict";e.s(["isFindingsSourceDp",()=>i,"isImageBasedTextFindingDp",()=>r,"isImagingSourceDp",()=>n]);var t=e.i(165981);let r=e=>{var r,n;return(null==(r=e.dataPoint.tags)?void 0:r.source)===t.DataPointSource.MRI||(null==(n=e.dataPoint.tags)?void 0:n.source)===t.DataPointSource.CT},n=e=>{var r,n,i;return(null==(r=e.dataPoint.tags)?void 0:r.source)===t.DataPointSource.MRI||(null==(n=e.dataPoint.tags)?void 0:n.source)===t.DataPointSource.CT||(null==(i=e.dataPoint.tags)?void 0:i.source)===t.DataPointSource.ImageBiomarker},i=e=>{var r;return(null==(r=e.dataPoint.tags)?void 0:r.infoType)!==t.DataPointInfoType.QUANTITATIVE_RESULT}},230698,e=>{"use strict";e.s(["DataPointSeveritySelector",()=>s,"adminSeverityColors",()=>a]);var t=e.i(843476),r=e.i(165981),n=e.i(167881),i=e.i(463415),o=e.i(390421),l=e.i(647163);let a={[r.DataPointSeverity.Normal]:"bg-deep-green-600",[r.DataPointSeverity.Minor]:"bg-light-green-600",[r.DataPointSeverity.Intermediate]:"bg-sand-600",[r.DataPointSeverity.Major]:"bg-rust-600",[r.DataPointSeverity.Serious]:"bg-aubergine-600"},s=e=>{let{dataPointId:s,severity:u,className:c}=e;return(0,t.jsxs)(i.DropdownMenu,{children:[(0,t.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{variant:"ghost",size:"sm",className:(0,l.cn)("h-6 w-6 rounded-full p-0",c),children:[(0,t.jsx)("div",{className:(0,l.cn)("h-4 w-4 rounded-full",u?a[u]:"border border-gray-300 bg-transparent")}),(0,t.jsx)("span",{className:"sr-only",children:"Select severity"})]})}),(0,t.jsx)(i.DropdownMenuContent,{align:"center",children:Object.entries(r.DataPointSeverity).map(e=>{let[r,n]=e;return(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>{s&&(0,o.setDoc)("dataPoint",s,{dataPoint:{assessment:{severity:n}}},{recordVersion:!0})},className:"flex cursor-pointer items-center gap-2",children:[(0,t.jsx)("div",{className:(0,l.cn)("h-3 w-3 rounded-full",a[n])}),(0,t.jsx)("span",{children:r})]},r)})})]})}},459217,993395,e=>{"use strict";e.s(["IsPdfRenderContext",()=>i,"IsPdfRenderProvider",()=>o,"useIsPdfRender",()=>l],459217);var t=e.i(843476);e.s(["DownloadReportMode",()=>r],993395);var r=function(e){return e.doctor="doctor",e.simple="simple",e}({}),n=e.i(271645);let i=(0,n.createContext)({isPdfRender:!1,pdfMode:r.simple,pdfVersion:""}),o=e=>{let{children:n,isPdfRender:o,pdfMode:l=r.simple,pdfVersion:a=""}=e;return(0,t.jsx)(i.Provider,{value:{isPdfRender:o,pdfMode:l,pdfVersion:a},children:n})},l=()=>(0,n.useContext)(i)},834907,e=>{"use strict";e.s(["getDpSortDate",()=>t]);let t=e=>{var t,r,n,i;return(null==(r=e.dataPoint.eventInfo)||null==(t=r.eventOccuredOn)?void 0:t.toMillis())||(null==(n=e.dataPoint.collectedOnDate)?void 0:n.toMillis())||(null==(i=e.createdAt)?void 0:i.toMillis())||0}},143854,163705,e=>{"use strict";e.s(["MriViewer",()=>b],143854);var t=e.i(843476);e.s(["getUrlsForSourceFileKeys",()=>u,"useSourceFileUrl",()=>c],163705);var r=e.i(951984),n=e.i(987749),i=e.i(271645);e.i(961086);var o=e.i(527215),l=e.i(908083),a=e.i(662537);let s=new Map,u=async e=>{if(0===e.length)return[];let t=Date.now(),r=e.map(e=>{let r=s.get(e);return{key:e,cached:r&&r.expiresAt>t?r:null}}),n=r.filter(e=>e.cached).map(e=>({url:e.cached.url,key:e.key})),i=r.filter(e=>!e.cached).map(e=>e.key);if(0===i.length)return n;let u=(0,o.getStorage)((0,l.init)().app);return[...n,...(await Promise.all(i.map(async e=>{try{let r=(0,o.ref)(u,"source_files/".concat(e)),n=await (0,o.getDownloadURL)(r);return s.set(e,{url:n,expiresAt:t+216e5}),console.log("URL:",n),{url:n,key:e}}catch(t){return console.warn("Could not get URL for ".concat(e,":"),t),a.captureMessage("Could not get URL for source file: ".concat(e),{level:"error",tags:{sourceFileKey:e},extra:{error:t}}),null}}))).filter(e=>null!==e)]},c=e=>{var t;let{urls:o,loading:l}=(e=>{let[t,n]=(0,i.useState)([]),[o,l]=(0,i.useState)(!0),{user:a,loading:s}=(0,r.useUser)();return((0,i.useEffect)(()=>{let t=async()=>{s||(n(await u(e)),l(!1))};e.length>0?t():(n([]),l(!1))},[JSON.stringify(e),s,a]),s)?{urls:[],loading:!0}:e.length?{urls:t,loading:o}:{urls:[],loading:!1}})((0,n.filterBool)([e]));return{url:null==(t=o[0])?void 0:t.url,loading:l}};var d=e.i(736749),p=e.i(647163),m=Object.defineProperty,v=new Map,f=new WeakMap,h=0,g=void 0;i.Component;var x=e.i(297675);let C=(0,i.lazy)(()=>e.A(242100).then(e=>({default:e.CornerstoneVolumeViewer}))),w=(0,i.lazy)(()=>e.A(402754).then(e=>({default:e.CornerstoneNiftiViewer}))),y=(0,i.memo)(e=>{let{imageUrl:r,poi:n,volumeData:o,viewerOptions:l,sourceFileKey:a}=e;return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(x.MriLoading,{className:null==l?void 0:l.className}),children:(null==o?void 0:o.useProViewer)?(0,t.jsx)(C,{imageUrl:r,volumeData:o,poi:n,viewerOptions:l,sourceFileKey:a}):(0,t.jsx)(w,{imageUrl:r,volumeData:o,poi:n,viewerOptions:l,sourceFileKey:a})})},(e,t)=>{var r,n,i,o,l,a,s,u,c,d;return e.imageUrl===t.imageUrl&&(null==(r=e.volumeData)?void 0:r.useProViewer)===(null==(n=t.volumeData)?void 0:n.useProViewer)&&(null==(i=e.poi)?void 0:i.x)===(null==(o=t.poi)?void 0:o.x)&&(null==(l=e.poi)?void 0:l.y)===(null==(a=t.poi)?void 0:a.y)&&(null==(s=e.poi)?void 0:s.z)===(null==(u=t.poi)?void 0:u.z)&&(null==e||null==(c=e.volumeData)?void 0:c.orientation)===(null==t||null==(d=t.volumeData)?void 0:d.orientation)});y.displayName="RenderMriViewer";let b=e=>{let{sourceFileKey:r,poi:n,volumeData:o,viewerOptions:l}=e,{url:a,loading:s}=c(r),{ref:u,inView:m}=function(){var e;let{threshold:t,delay:r,trackVisibility:n,rootMargin:o,root:l,triggerOnce:a,skip:s,initialInView:u,fallbackInView:c,onChange:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[p,m]=i.useState(null),x=i.useRef(d),[C,w]=i.useState({inView:!!u,entry:void 0});x.current=d,i.useEffect(()=>{let e;if(!s&&p)return e=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;if(void 0===window.IntersectionObserver&&void 0!==n){let i=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}let{id:i,observer:o,elements:l}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var r;return"".concat(t,"_").concat("root"===t?(r=e.root)?(f.has(r)||(h+=1,f.set(r,h.toString())),f.get(r)):"0":e[t])}).toString(),r=v.get(t);if(!r){let n,i=new Map,o=new IntersectionObserver(t=>{t.forEach(t=>{var r;let o=t.isIntersecting&&n.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(r=i.get(t.target))||r.forEach(e=>{e(o,t)})})},e);n=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:i},v.set(t,r)}return r}(r),a=l.get(e)||[];return l.has(e)||l.set(e,a),a.push(t),o.observe(e),function(){a.splice(a.indexOf(t),1),0===a.length&&(l.delete(e),o.unobserve(e)),0===l.size&&(o.disconnect(),v.delete(i))}}(p,(t,r)=>{w({inView:t,entry:r}),x.current&&x.current(t,r),r.isIntersecting&&a&&e&&(e(),e=void 0)},{root:l,rootMargin:o,threshold:t,trackVisibility:n,delay:r},c),()=>{e&&e()}},[Array.isArray(t)?t.toString():t,p,l,o,a,s,n,c,r]);let y=null==(e=C.entry)?void 0:e.target,b=i.useRef(void 0);p||!y||a||s||b.current===y||(b.current=y,w({inView:!!u,entry:void 0}));let S=[m,C.inView,C.entry];return S.ref=S[0],S.inView=S[1],S.entry=S[2],S}({rootMargin:"200px 0px"}),[C,w]=(0,i.useState)(!1);(0,i.useEffect)(()=>{m&&!C&&w(!0)},[m,C]);let b=(0,t.jsx)(x.MriLoading,{className:null==l?void 0:l.className}),S=!s&&!(0,d.isServerside)()&&a,R=C&&S;return(0,t.jsx)("div",{ref:u,className:"flex min-h-0 w-full grow flex-col",children:R?(0,t.jsx)("div",{className:(0,p.cn)("flex min-h-0 w-full grow flex-col",!m&&"invisible"),children:(0,t.jsx)(y,{imageUrl:a,poi:n,volumeData:o,viewerOptions:l,sourceFileKey:r})}):b})}},908098,671428,371532,728231,e=>{"use strict";e.s(["ImageReferenceDisplay",()=>m,"ImageReferenceThumbnail",()=>v],908098);var t=e.i(843476),r=e.i(143854),n=e.i(459217),i=e.i(717014),o=e.i(717038),l=e.i(995446),a=e.i(647163),s=e.i(271645),u=e.i(163705),c=e.i(657688);function d(e){let{className:r,...n}=e;return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",r),...n})}e.s(["Skeleton",()=>d],671428);let p=e=>{let{sourceFileKey:r,className:n}=e,{url:i,loading:o}=(0,u.useSourceFileUrl)(r);return!r||o?(0,t.jsx)(d,{className:n}):i?(0,t.jsx)(c.default,{width:500,height:500,src:i,alt:"Image from source file ".concat(r),className:n,unoptimized:!0}):null},m=e=>{var n,i,s,u,c,d,m;let{imageReference:v,mriViewerOptions:f,imageClassName:h}=e,g=(0,l.useObs)((0,o.docObs)("sourceFile",v.sourceFileKey),[v.sourceFileKey]),x=(null==g||null==(i=g.fileLocation)||null==(n=i.originalFileExtension)?void 0:n.match(/nii|nii.gz/i))||(null==g||null==(u=g.fileLocation)||null==(s=u.originalFileName)?void 0:s.match(/nii|nii.gz/i))||(null==g||null==(d=g.fileLocation)||null==(c=d.path)?void 0:c.match(/nii|nii.gz/i)),C=null;return C=x?(0,t.jsx)(r.MriViewer,{sourceFileKey:v.sourceFileKey,viewerOptions:f,poi:null==(m=v.pois)?void 0:m[0],volumeData:v.volumeData}):(0,t.jsx)("div",{className:"min-h-0 w-full min-w-0 grow",children:(0,t.jsx)(p,{sourceFileKey:v.sourceFileKey,className:(0,a.cn)("h-full w-full bg-black object-contain",h)})}),(0,t.jsx)("div",{className:"flex w-full grow flex-col overflow-hidden rounded-xl",children:C})},v=e=>{let{imageReference:r,mriViewerOptions:o,imageClassName:l}=e,{isPdfRender:a}=(0,s.useContext)(n.IsPdfRenderContext);return a?(0,t.jsx)("div",{className:"flex shrink-0 grow flex-col overflow-hidden rounded-xl",children:(0,t.jsx)("div",{className:"h-full w-full bg-black"})}):(0,t.jsx)(i.MRIControlsProvider,{panDisabled:!0,children:(0,t.jsx)(m,{imageReference:r,mriViewerOptions:o,imageClassName:l})})};e.s(["MagnifyingGlassIcon",()=>h,"MagnifyingGlassMinusIcon",()=>g],371532),e.i(114683),e.i(828659).default,e.i(149015).default,e.i(637062).default,e.i(56777).default,e.i(242386).default,e.i(765422).default,e.i(396103).default,e.i(927516).default,e.i(333383).default,e.i(518107).default,e.i(222070).default;var f=e.i(165981);f.OrganSystem.Urinary04,f.OrganSystem.Nervous05,f.OrganSystem.Cardiovascular01,f.OrganSystem.Metabolic09,f.OrganSystem.Hematologic10,f.OrganSystem.Oncology00,f.OrganSystem.Digestive03,f.OrganSystem.Msk08,f.OrganSystem.Endocrine06,f.OrganSystem.Respiratory02,f.OrganSystem.GenderHealth07,f.OrganSystem.Lymphatic11;let h=e=>(0,t.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{d:"M17.8424 17.626L12.9209 12.5077C14.1393 11.3337 14.8996 9.68749 14.8996 7.8658C14.8996 4.3094 12.0063 1.41602 8.44979 1.41602C4.89331 1.41602 2 4.30932 2 7.8658C2 11.4222 4.89331 14.3156 8.44979 14.3156C9.77659 14.3156 11.011 13.9125 12.0374 13.2228L17.0261 18.411C17.1373 18.5266 17.2858 18.5848 17.4343 18.5848C17.5755 18.5848 17.7169 18.5323 17.8267 18.4267C18.0521 18.2098 18.0592 17.8514 17.8424 17.626ZM3.13247 7.8658C3.13247 4.93384 5.51783 2.54848 8.44979 2.54848C11.3818 2.54848 13.7671 4.93384 13.7671 7.8658C13.7671 10.7978 11.3818 13.1831 8.44979 13.1831C5.51783 13.183 3.13247 10.7978 3.13247 7.8658Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M11.3377 7.29975H9.01628V4.97834C9.01628 4.66556 8.76284 4.41211 8.45005 4.41211C8.13726 4.41211 7.88381 4.66556 7.88381 4.97834V7.29975H5.56233C5.24954 7.29975 4.99609 7.5532 4.99609 7.86599C4.99609 8.17878 5.24954 8.43222 5.56233 8.43222H7.88374V10.7537C7.88374 11.0665 8.13718 11.3199 8.44997 11.3199C8.76276 11.3199 9.01621 11.0665 9.01621 10.7537V8.43222H11.3376C11.6504 8.43222 11.9039 8.17878 11.9039 7.86599C11.9039 7.5532 11.6504 7.29975 11.3377 7.29975Z",fill:"currentColor"})]}),g=e=>(0,t.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{d:"M17.8424 17.626L12.9209 12.5077C14.1393 11.3337 14.8996 9.68749 14.8996 7.8658C14.8996 4.3094 12.0063 1.41602 8.44979 1.41602C4.89331 1.41602 2 4.30932 2 7.8658C2 11.4222 4.89331 14.3156 8.44979 14.3156C9.77659 14.3156 11.011 13.9125 12.0374 13.2228L17.0261 18.411C17.1373 18.5266 17.2858 18.5848 17.4343 18.5848C17.5755 18.5848 17.7169 18.5323 17.8267 18.4267C18.0521 18.2098 18.0592 17.8514 17.8424 17.626ZM3.13247 7.8658C3.13247 4.93384 5.51783 2.54848 8.44979 2.54848C11.3818 2.54848 13.7671 4.93384 13.7671 7.8658C13.7671 10.7978 11.3818 13.1831 8.44979 13.1831C5.51783 13.183 3.13247 10.7978 3.13247 7.8658Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M11.3377 7.29975H5.56233C5.24954 7.29975 4.99609 7.5532 4.99609 7.86599C4.99609 8.17878 5.24954 8.43222 5.56233 8.43222H11.3376C11.6504 8.43222 11.9039 8.17878 11.9039 7.86599C11.9039 7.5532 11.6504 7.29975 11.3377 7.29975Z",fill:"currentColor"})]});e.s(["Tooltip",()=>en,"TooltipContent",()=>eo,"TooltipProvider",()=>er,"TooltipTrigger",()=>ei],728231);var x=e.i(981140),C=e.i(820783),w=e.i(30030),y=e.i(726330),b=e.i(610772),S=e.i(853660),R=e.i(774606),E=e.i(296626),M=e.i(248425),O=e.i(991918),T=e.i(369340),j=e.i(959411),[P,D]=(0,w.createContextScope)("Tooltip",[S.createPopperScope]),L=(0,S.createPopperScope)(),k="TooltipProvider",I="tooltip.open",[U,N]=P(k),_=e=>{let{__scopeTooltip:r,delayDuration:n=700,skipDelayDuration:i=300,disableHoverableContent:o=!1,children:l}=e,a=s.useRef(!0),u=s.useRef(!1),c=s.useRef(0);return s.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,t.jsx)(U,{scope:r,isOpenDelayedRef:a,delayDuration:n,onOpen:s.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:s.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,i)},[i]),isPointerInTransitRef:u,onPointerInTransitChange:s.useCallback(e=>{u.current=e},[]),disableHoverableContent:o,children:l})};_.displayName=k;var A="Tooltip",[F,B]=P(A),V=e=>{let{__scopeTooltip:r,children:n,open:i,defaultOpen:o,onOpenChange:l,disableHoverableContent:a,delayDuration:u}=e,c=N(A,e.__scopeTooltip),d=L(r),[p,m]=s.useState(null),v=(0,b.useId)(),f=s.useRef(0),h=null!=a?a:c.disableHoverableContent,g=null!=u?u:c.delayDuration,x=s.useRef(!1),[C,w]=(0,T.useControllableState)({prop:i,defaultProp:null!=o&&o,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(I))):c.onClose(),null==l||l(e)},caller:A}),y=s.useMemo(()=>C?x.current?"delayed-open":"instant-open":"closed",[C]),R=s.useCallback(()=>{window.clearTimeout(f.current),f.current=0,x.current=!1,w(!0)},[w]),E=s.useCallback(()=>{window.clearTimeout(f.current),f.current=0,w(!1)},[w]),M=s.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{x.current=!0,w(!0),f.current=0},g)},[g,w]);return s.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),(0,t.jsx)(S.Root,{...d,children:(0,t.jsx)(F,{scope:r,contentId:v,open:C,stateAttribute:y,trigger:p,onTriggerChange:m,onTriggerEnter:s.useCallback(()=>{c.isOpenDelayedRef.current?M():R()},[c.isOpenDelayedRef,M,R]),onTriggerLeave:s.useCallback(()=>{h?E():(window.clearTimeout(f.current),f.current=0)},[E,h]),onOpen:R,onClose:E,disableHoverableContent:h,children:n})})};V.displayName=A;var z="TooltipTrigger",H=s.forwardRef((e,r)=>{let{__scopeTooltip:n,...i}=e,o=B(z,n),l=N(z,n),a=L(n),u=s.useRef(null),c=(0,C.useComposedRefs)(r,u,o.onTriggerChange),d=s.useRef(!1),p=s.useRef(!1),m=s.useCallback(()=>d.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),(0,t.jsx)(S.Anchor,{asChild:!0,...a,children:(0,t.jsx)(M.Primitive.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...i,ref:c,onPointerMove:(0,x.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(p.current||l.isPointerInTransitRef.current||(o.onTriggerEnter(),p.current=!0))}),onPointerLeave:(0,x.composeEventHandlers)(e.onPointerLeave,()=>{o.onTriggerLeave(),p.current=!1}),onPointerDown:(0,x.composeEventHandlers)(e.onPointerDown,()=>{o.open&&o.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:(0,x.composeEventHandlers)(e.onFocus,()=>{d.current||o.onOpen()}),onBlur:(0,x.composeEventHandlers)(e.onBlur,o.onClose),onClick:(0,x.composeEventHandlers)(e.onClick,o.onClose)})})});H.displayName=z;var K="TooltipPortal",[G,X]=P(K,{forceMount:void 0}),Z=e=>{let{__scopeTooltip:r,forceMount:n,children:i,container:o}=e,l=B(K,r);return(0,t.jsx)(G,{scope:r,forceMount:n,children:(0,t.jsx)(E.Presence,{present:n||l.open,children:(0,t.jsx)(R.Portal,{asChild:!0,container:o,children:i})})})};Z.displayName=K;var W="TooltipContent",q=s.forwardRef((e,r)=>{let n=X(W,e.__scopeTooltip),{forceMount:i=n.forceMount,side:o="top",...l}=e,a=B(W,e.__scopeTooltip);return(0,t.jsx)(E.Presence,{present:i||a.open,children:a.disableHoverableContent?(0,t.jsx)(ee,{side:o,...l,ref:r}):(0,t.jsx)(Y,{side:o,...l,ref:r})})}),Y=s.forwardRef((e,r)=>{let n=B(W,e.__scopeTooltip),i=N(W,e.__scopeTooltip),o=s.useRef(null),l=(0,C.useComposedRefs)(r,o),[a,u]=s.useState(null),{trigger:c,onClose:d}=n,p=o.current,{onPointerInTransitChange:m}=i,v=s.useCallback(()=>{u(null),m(!1)},[m]),f=s.useCallback((e,t)=>{let r=e.currentTarget,n={x:e.clientX,y:e.clientY},i=function(e,t){let r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,i,o)){case o:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw Error("unreachable")}}(n,r.getBoundingClientRect());u(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let n=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x))t.pop();else break}t.push(n)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let n=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(n.y-t.y)>=(e.y-t.y)*(n.x-t.x))r.pop();else break}r.push(n)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(t)}([...function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,i),...function(e){let{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}(t.getBoundingClientRect())])),m(!0)},[m]);return s.useEffect(()=>()=>v(),[v]),s.useEffect(()=>{if(c&&p){let e=e=>f(e,p),t=e=>f(e,c);return c.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}},[c,p,f,v]),s.useEffect(()=>{if(a){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},n=(null==c?void 0:c.contains(t))||(null==p?void 0:p.contains(t)),i=!function(e,t){let{x:r,y:n}=e,i=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let l=t[e],a=t[o],s=l.x,u=l.y,c=a.x,d=a.y;u>n!=d>n&&r<(c-s)*(n-u)/(d-u)+s&&(i=!i)}return i}(r,a);n?v():i&&(v(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,p,a,d,v]),(0,t.jsx)(ee,{...e,ref:l})}),[J,Q]=P(A,{isInside:!1}),$=(0,O.createSlottable)("TooltipContent"),ee=s.forwardRef((e,r)=>{let{__scopeTooltip:n,children:i,"aria-label":o,onEscapeKeyDown:l,onPointerDownOutside:a,...u}=e,c=B(W,n),d=L(n),{onClose:p}=c;return s.useEffect(()=>(document.addEventListener(I,p),()=>document.removeEventListener(I,p)),[p]),s.useEffect(()=>{if(c.trigger){let e=e=>{let t=e.target;(null==t?void 0:t.contains(c.trigger))&&p()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,p]),(0,t.jsx)(y.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:p,children:(0,t.jsxs)(S.Content,{"data-state":c.stateAttribute,...d,...u,ref:r,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,t.jsx)($,{children:i}),(0,t.jsx)(J,{scope:n,isInside:!0,children:(0,t.jsx)(j.Root,{id:c.contentId,role:"tooltip",children:o||i})})]})})});q.displayName=W;var et="TooltipArrow";s.forwardRef((e,r)=>{let{__scopeTooltip:n,...i}=e,o=L(n);return Q(et,n).isInside?null:(0,t.jsx)(S.Arrow,{...o,...i,ref:r})}).displayName=et;let er=_,en=V,ei=H,eo=s.forwardRef((e,r)=>{let{className:n,sideOffset:i=4,...o}=e;return(0,t.jsx)(Z,{children:(0,t.jsx)(q,{ref:r,sideOffset:i,className:(0,a.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 overflow-hidden rounded-md px-3 py-1.5 text-xs text-white",n),...o})})});eo.displayName=q.displayName},367240,e=>{"use strict";e.s(["RotateCcw",()=>t],367240);let t=(0,e.i(475254).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},414934,e=>{"use strict";e.s(["MRINavigationBar",()=>d]);var t=e.i(843476),r=e.i(167881),n=e.i(371532),i=e.i(728231),o=e.i(717014),l=e.i(25887),a=e.i(676029),s=e.i(647163),u=e.i(367240),c=e.i(271645);function d(e){var d,p;let{sourceFileKey:m}=e,{getSliceInfo:v,updateCurrentSlice:f,getZoomLevel:h,setZoomLevel:g,resetViewport:x}=(0,o.useMRIControls)(),{t:C}=(0,a.useT)(),{log:w}=(0,l.useA)("report"),y=v(m),b=(0,c.useRef)(null),[S,R]=(0,c.useState)(!1),[E,M]=(0,c.useState)(null),O=h(m),T=null!=(d=null==y?void 0:y.currentSlice)?d:0,j=null!=(p=null==y?void 0:y.totalSlices)?p:0,P=null==y?void 0:y.poiSliceIndex,D=(0,c.useMemo)(()=>void 0===P?[]:[P],[P]),L=(0,c.useCallback)(e=>{if(!S&&"mousedown"!==e.type||!b.current)return;let t=b.current.getBoundingClientRect();f(m,Math.round(Math.max(0,Math.min(1,(e.clientX-t.left)/t.width))*(j-1)))},[S,b,m,f,j]),k=(0,c.useCallback)(e=>{if(!S&&"touchstart"!==e.type||!b.current)return;let t=e.touches[0],r=b.current.getBoundingClientRect();f(m,Math.round(Math.max(0,Math.min(1,(t.clientX-r.left)/r.width))*(j-1)))},[S,b,m,f,j]),I=(0,c.useCallback)(()=>{R(!1)},[]),U=(0,c.useCallback)(()=>{R(!1)},[]);(0,c.useEffect)(()=>{if(S){let e=e=>L(e),t=()=>I(),r=e=>k(e),n=()=>U();return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.addEventListener("touchmove",r),document.addEventListener("touchend",n),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",n)}}},[S,L,I,k,U]);let N=(0,c.useCallback)(e=>{if(!b.current||0===D.length)return;let t=b.current.getBoundingClientRect(),r=e.clientX-t.left,n=t.width,i=null,o=1/0;D.forEach(e=>{let t=Math.abs(r-e/(j-1)*n);t<20&&t<o&&(i=e,o=t)}),M(i)},[D,j]),_=(0,c.useCallback)(()=>{M(null)},[]);return j<=1?null:(0,t.jsx)(i.TooltipProvider,{children:(0,t.jsxs)("div",{className:"w-full max-w-[450px] px-4",children:[(0,t.jsx)("div",{ref:b,className:"relative h-8 cursor-pointer select-none",onMouseDown:e=>{R(!0),L(e)},onTouchStart:e=>{R(!0),k(e)},onMouseMove:N,onMouseLeave:_,children:(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-between",children:Array.from({length:j}).map((e,r)=>{let n=D.includes(r),o=r===T,l=r/(j-1)*100;return(0,t.jsx)("div",{className:"absolute",style:{left:"".concat(l,"%")},children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,s.cn)("absolute bottom-0 w-[2px] -translate-x-1/2 bg-blue-400",o?"h-4":"h-2"),onClick:e=>{e.stopPropagation(),f(m,r)}}),E===r&&(0,t.jsxs)(i.Tooltip,{open:!0,children:[(0,t.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:"absolute -inset-x-5 -inset-y-2"})}),(0,t.jsx)(i.TooltipContent,{className:"border-0 bg-white/10 text-white backdrop-blur-sm",sideOffset:12,children:(0,t.jsx)("p",{children:C("Finding")})})]})]}):(0,t.jsx)("div",{className:(0,s.cn)("absolute bottom-0 -translate-x-1/2 bg-white/40",o?"h-4 w-[2px] bg-white":"h-2 w-px")})},r)})})}),(0,t.jsxs)("div",{className:"mt-6 mb-8 flex flex-wrap justify-center gap-2",children:[(0,t.jsxs)(r.Button,{variant:"dark",size:"sm",className:"rounded-full px-4",onClick:()=>{w("image_viewer_zoomed_in",{imageReferenceKey:m}),g(m,Math.min(1.2*O,10))},title:C("Zoom in"),"data-sentry-ignore-rage-click":!0,children:[(0,t.jsx)(n.MagnifyingGlassIcon,{className:"h-4 w-4"}),(0,t.jsx)("div",{className:"hidden md:block",children:C("Zoom In")})]}),(0,t.jsxs)(r.Button,{variant:"dark",size:"sm",className:"rounded-full px-4",onClick:()=>{w("image_viewer_zoomed_out",{imageReferenceKey:m}),g(m,Math.max(O/1.2,.2))},title:C("Zoom out"),"data-sentry-ignore-rage-click":!0,children:[(0,t.jsx)(n.MagnifyingGlassMinusIcon,{className:"h-4 w-4"}),(0,t.jsx)("div",{className:"hidden md:block",children:C("Zoom Out")})]}),(0,t.jsxs)(r.Button,{variant:"dark",size:"sm",className:"rounded-full px-4",onClick:()=>{w("image_viewer_reset",{imageReferenceKey:m}),f(m,void 0!==P?P:0),x(m)},title:C("Reset to first POI and zoom to 100%"),"data-sentry-ignore-rage-click":!0,children:[(0,t.jsx)(u.RotateCcw,{className:"h-4 w-4"}),(0,t.jsx)("div",{className:"hidden md:block",children:C("Reset")})]})]})]})})}},794763,e=>{"use strict";e.s(["getDpDisplayFields",()=>n,"useDpDisplayFields",()=>i]);var t=e.i(676029);let r=e=>e?["μ","µ"].some(t=>e.startsWith(t))?e.charAt(0)+e.slice(1).toUpperCase():e.toUpperCase():"",n=(e,t)=>{var n,i,o,l,a,s,u,c,d;let p=(null==t?void 0:t.language)||"en",m=(null==(n=e.info)?void 0:n.metric)||"",v=null!=(d=null==(i=e.info)?void 0:i.decimalPlacesToShow)?d:0,f=null==(l=e.dataPoint.biomarkerData)||null==(o=l.value)?void 0:o.toLocaleString(p,{minimumFractionDigits:v,maximumFractionDigits:v});return{title:(null==(a=e.info)?void 0:a.name)||(null==(s=e.dataPoint.textInfo)?void 0:s.title)||"",description:(null==(u=e.dataPoint.textInfo)?void 0:u.detailedLaymanDescription)||(null==(c=e.info)?void 0:c.description)||"",unit:m,value:f,valueWithUnit:"".concat(f," ").concat(m),uppercase:{unit:r(m),valueWithUnit:"".concat(f," ").concat(r(m))}}},i=e=>{let{i18n:r}=(0,t.useT)();return n(e,r)}}]);

//# sourceMappingURL=6a295fcc19c38185.js.map
//# debugId=268c51ef-71d6-5d27-95b3-53eac80ad58b
